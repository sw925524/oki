<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Okinawa 2026 Pro</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        [v-cloak] { display: none; }
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #f1f5f9; padding-bottom: 120px; }
        .header-bg {
            background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.2)), url('https://images.unsplash.com/photo-1559128010-7c1ad6e1b6a5?q=80&w=1000');
            background-size: cover; background-position: center; height: 160px;
            display: flex; flex-direction: column; justify-content: center; align-items: center; color: white;
            border-bottom-left-radius: 30px; border-bottom-right-radius: 30px; position: relative;
        }
        .tab-nav { position: fixed; bottom: 0; left: 0; right: 0; height: 85px; background: white; border-top: 1px solid #e2e8f0; display: flex; justify-content: space-around; align-items: center; z-index: 100; }
        .tab-btn { flex: 1; display: flex; flex-direction: column; align-items: center; color: #94a3b8; font-size: 10px; font-weight: bold; }
        .tab-active { color: #0369a1 !important; }
        .cat-tag { padding: 8px 16px; background: white; border-radius: 20px; font-size: 13px; font-weight: bold; color: #64748b; border: 1px solid #e2e8f0; white-space: nowrap; }
        .cat-tag-active { background: #0369a1; color: white; border-color: #0369a1; }
        .card { background: white; border-radius: 20px; padding: 16px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 12px; }
        .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.6); backdrop-blur: 4px; z-index: 200; display: flex; align-items: flex-end; }
        .modal-content { background: white; width: 100%; border-top-left-radius: 30px; border-top-right-radius: 30px; padding: 24px; max-height: 90vh; overflow-y: auto; }
        input, select, textarea { width: 100%; background: #f8fafc; border: 1px solid #e2e8f0; padding: 12px; border-radius: 12px; font-weight: bold; margin-top: 4px; outline: none; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
    </style>
</head>
<body>
    <div id="app" v-cloak>
        <header class="header-bg">
            <h1 class="text-2xl font-black tracking-widest">æ²–ç¹©å¤æ—¥ç´€è¡Œ</h1>
            <div class="absolute bottom-4 right-6 bg-white/20 backdrop-blur-md px-3 py-1 rounded-full border border-white/30 flex items-center gap-2">
                <span class="text-sm">â˜€ï¸</span><span class="text-xs font-black">28Â°C NAHA</span>
            </div>
        </header>

        <main class="px-4 mt-6">
            <div v-if="activeTab === 'plan'">
                <div class="flex gap-2 mb-6">
                    <button v-for="day in tripDays" @click="currentDate = day.date"
                        :class="['flex-1 h-16 rounded-2xl flex flex-col items-center justify-center transition-all', currentDate === day.date ? 'bg-sky-800 text-white shadow-lg' : 'bg-white text-slate-400 shadow-sm']">
                        <span class="text-[9px] font-bold">{{ day.week }}</span>
                        <span class="text-lg font-black">{{ day.dayNum }}</span>
                    </button>
                </div>
                
                <div v-for="(item, index) in itineraries[currentDate]" :key="index" class="card" @click="openEditPlan(item, index)">
                    <div class="flex gap-4">
                        <div class="text-3xl">{{ getIcon(item.category) }}</div>
                        <div class="flex-1">
                            <div class="flex justify-between items-start">
                                <h3 class="font-black text-slate-700">{{ item.name }}</h3>
                                <span class="text-[10px] font-black text-sky-600 bg-sky-50 px-2 py-0.5 rounded">{{ item.time }}</span>
                            </div>
                            <div class="mt-2 space-y-1">
                                <p v-if="item.openTime" class="text-[10px] text-slate-500">ğŸ•’ ç‡Ÿæ¥­: {{ item.openTime }}</p>
                                <p v-if="item.ticket" class="text-[10px] text-orange-600 font-bold">ğŸ« é–€ç¥¨: {{ item.ticket }}</p>
                                <p class="text-[11px] text-slate-400 mt-1 italic">{{ item.note }}</p>
                            </div>
                        </div>
                    </div>
                </div>
                <button @click="openAddPlan" class="fixed right-6 bottom-24 w-14 h-14 bg-sky-800 text-white rounded-full shadow-xl text-3xl font-light z-50">+</button>
            </div>

            <div v-if="activeTab === 'food'">
                <div class="sticky top-0 bg-[#f1f5f9] pt-2 pb-4 z-10">
                    <h2 class="text-xl font-black text-slate-800 mb-4 px-1">ğŸ± ç¾é£Ÿæ¸…å–®</h2>
                    <div class="flex overflow-x-auto gap-2 no-scrollbar px-1">
                        <button v-for="c in categories" @click="selectedCat = c" 
                            :class="['cat-tag', selectedCat === c ? 'cat-tag-active' : '']">{{ c }}</button>
                    </div>
                </div>
                <div class="space-y-4 pb-10">
                    <div v-for="f in filteredFood" class="card">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="font-black text-slate-700">{{ f.name }}</h3>
                            <span class="text-[10px] bg-slate-100 text-slate-400 px-2 py-1 rounded font-bold">{{ f.area }}</span>
                        </div>
                        <p class="text-[11px] text-slate-500 mb-4">{{ f.desc }}</p>
                        <div class="flex gap-2">
                            <button @click="goMap(f.name)" class="flex-1 py-2.5 bg-slate-50 rounded-xl text-[11px] font-bold text-slate-600 border border-slate-100">åœ°åœ–æœå°‹</button>
                            <button @click="addFoodToPlan(f)" class="flex-1 py-2.5 bg-sky-800 text-white rounded-xl text-[11px] font-bold shadow-md">åŠ å…¥è¡Œç¨‹</button>
                        </div>
                    </div>
                </div>
            </div>

            <div v-if="activeTab === 'info'" class="space-y-4 pb-10">
                <h2 class="text-xl font-black text-slate-800 px-1">ğŸš‘ æ€¥é›£èˆ‡ç§Ÿè»Š</h2>
                <div class="card bg-red-50 border-l-8 border-red-500">
                    <h3 class="font-black text-red-700">ğŸ†˜ æ€¥é›£æ•‘åŠ©è³‡è¨Š</h3>
                    <div class="mt-3 space-y-2 text-xs font-bold text-red-600">
                        <p>ğŸ“ å ±è­¦: 110 | æ¶ˆé˜²/æ•‘è­·: 119</p>
                        <p>ğŸ“ é§æ—¥ä»£è¡¨è™•(é‚£éœ¸): +81-98-862-2043</p>
                        <p>ğŸš‘ å¤–åœ‹äººé†«ç™‚è«®è©¢: 0570-000-911</p>
                    </div>
                </div>
                <div class="card border-l-8 border-sky-600">
                    <h3 class="font-black text-slate-700 text-lg">ORIX ç§Ÿè»Š (é‚£éœ¸ç©ºæ¸¯)</h3>
                    <p class="text-[11px] text-slate-400 mt-1">æ²–ç¹©æœ€å¤§çš„ç§Ÿè»Šå…¬å¸ï¼Œè»Šæºå……è¶³ã€‚</p>
                    <button @click="goMap('ORIX Rent a car Naha Airport')" class="mt-3 w-full py-2 bg-sky-50 text-sky-700 text-[11px] font-bold rounded-lg uppercase">é–‹å•Ÿåœ°åœ–</button>
                </div>
                <div class="card border-l-8 border-orange-500">
                    <h3 class="font-black text-slate-700 text-lg">OTS ç§Ÿè»Š (è‡¨ç©ºè±å´åº—)</h3>
                    <p class="text-[11px] text-slate-400 mt-1">è¯èªå°æ‡‰æœ€å®Œå–„ï¼Œé©åˆç¬¬ä¸€æ¬¡è‡ªé§•ã€‚</p>
                    <button @click="goMap('OTS Rent a car Rinku Toyosaki')" class="mt-3 w-full py-2 bg-orange-50 text-orange-700 text-[11px] font-bold rounded-lg uppercase">é–‹å•Ÿåœ°åœ–</button>
                </div>
            </div>

            <div v-if="activeTab === 'cost'" class="space-y-4 pb-10">
                <div class="card bg-slate-900 text-white p-6 text-center shadow-xl">
                    <p class="text-[10px] font-bold opacity-50 tracking-widest">EXPENSE SUMMARY</p>
                    <h2 class="text-3xl font-black mt-1">Â¥{{ totalCost }}</h2>
                    <div class="mt-4 pt-4 border-t border-white/10 flex justify-between items-center px-4">
                        <span class="text-xs">å°å¹£ä¼°ç®— (0.21)</span>
                        <span class="text-xl font-black text-sky-400">NT$ {{ (totalCost * 0.21).toFixed(0) }}</span>
                    </div>
                </div>
                <div v-for="(c, i) in costs" :key="i" class="card flex justify-between items-center" @click="deleteCost(i)">
                    <div>
                        <p class="font-bold text-slate-700">{{ c.name }}</p>
                        <p class="text-[10px] text-slate-400 uppercase font-black">{{ c.cat }}</p>
                    </div>
                    <p class="font-black text-slate-700">Â¥{{ c.amount }}</p>
                </div>
                <button @click="openAddCost" class="w-full py-4 bg-white border-2 border-dashed border-slate-300 rounded-2xl text-slate-400 font-bold text-sm">+ é»æ“Šè¨˜éŒ„èŠ±è²»</button>
            </div>
        </main>

        <div v-if="showPlanModal" class="modal-overlay" @click.self="showPlanModal = false">
            <div class="modal-content">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-black text-slate-800">{{ isEdit ? 'ä¿®æ”¹è¡Œç¨‹' : 'æ–°å¢è¡Œç¨‹' }}</h3>
                    <button @click="showPlanModal = false" class="text-slate-300 text-2xl">âœ•</button>
                </div>
                <div class="space-y-4">
                    <div><label class="text-xs font-black text-slate-400">è¡Œç¨‹é¡å‹</label>
                        <select v-model="formPlan.category">
                            <option v-for="c in ['æ™¯é»','ä½å®¿','ç¾é£Ÿ','è³¼ç‰©','èˆªç­','å…¶ä»–']" :key="c">{{c}}</option>
                        </select>
                    </div>
                    <div><label class="text-xs font-black text-slate-400">åç¨±</label><input v-model="formPlan.name" placeholder="è«‹è¼¸å…¥åç¨±"></div>
                    <div><label class="text-xs font-black text-slate-400">é è¨ˆæ™‚é–“</label><input type="time" v-model="formPlan.time"></div>
                    
                    <div v-if="['æ™¯é»','ä½å®¿','ç¾é£Ÿ','è³¼ç‰©'].includes(formPlan.category)">
                        <label class="text-xs font-black text-slate-400">ç‡Ÿæ¥­æ™‚é–“ / Check-in</label><input v-model="formPlan.openTime" placeholder="ä¾‹å¦‚: 09:00 - 18:00">
                    </div>
                    <div v-if="formPlan.category === 'æ™¯é»'">
                        <label class="text-xs font-black text-slate-400">é–€ç¥¨è²»ç”¨</label><input v-model="formPlan.ticket" placeholder="ä¾‹å¦‚: æˆäºº Â¥2000">
                    </div>
                    
                    <div><label class="text-xs font-black text-slate-400">ç‰¹è‰² & å‚™è¨»</label><textarea v-model="formPlan.note" rows="3" placeholder="æƒ³è¨˜éŒ„çš„ç´°ç¯€..."></textarea></div>
                    
                    <div class="flex gap-3 pt-4">
                        <button v-if="isEdit" @click="confirmDeletePlan" class="flex-1 py-4 bg-red-50 text-red-500 rounded-2xl font-black uppercase text-xs">åˆªé™¤</button>
                        <button @click="savePlan" class="flex-[2] py-4 bg-sky-800 text-white rounded-2xl font-black shadow-lg">å„²å­˜è¡Œç¨‹</button>
                    </div>
                </div>
            </div>
        </div>

        <nav class="tab-nav">
            <button v-for="t in menuItems" @click="activeTab = t.id" :class="['tab-btn', activeTab === t.id ? 'tab-active' : '']">
                <span class="text-2xl">{{ t.icon }}</span><span class="mt-1">{{ t.name }}</span>
            </button>
        </nav>
    </div>

    <script>
        const { createApp, ref, computed, onMounted } = Vue;
        createApp({
            setup() {
                const activeTab = ref('plan');
                const currentDate = ref('2026-04-14');
                const selectedCat = ref('æ‹‰éºµ');
                const showPlanModal = ref(false);
                const isEdit = ref(false);
                const currentIdx = ref(null);
                const formPlan = ref({});
                const costs = ref([]);

                const menuItems = [
                    { id: 'plan', name: 'è¡Œç¨‹', icon: 'ğŸ“' },
                    { id: 'food', name: 'ç¾é£Ÿ', icon: 'ğŸ•' },
                    { id: 'info', name: 'è³‡è¨Š', icon: 'ğŸš‘' },
                    { id: 'cost', name: 'å¸³ç›®', icon: 'ğŸ’°' }
                ];

                const tripDays = [
                    { date: '2026-04-14', week: 'D1', dayNum: '14' },
                    { date: '2026-04-15', week: 'D2', dayNum: '15' },
                    { date: '2026-04-16', week: 'D3', dayNum: '16' },
                    { date: '2026-04-17', week: 'D4', dayNum: '17' },
                    { date: '2026-04-18', week: 'D5', dayNum: '18' }
                ];

                const categories = ['æ‹‰éºµ', 'å®šé£Ÿ', 'ç‰›æ’æˆ–ç‡’è‚‰', 'å°ç”œé»å’–å•¡'];
                const itineraries = ref({'2026-04-14':[], '2026-04-15':[], '2026-04-16':[], '2026-04-17':[], '2026-04-18':[]});

                const foodList = [
                    // æ‹‰éºµ (12)
                    { name: 'æš–æš®æ‹‰éºµ', cat: 'æ‹‰éºµ', area: 'é‚£éœ¸', desc: 'ä¹å·ç¥¨é¸ç¬¬ä¸€ï¼Œæ¹¯é ­æ¿ƒåšè€Œä¸è†©ã€‚' },
                    { name: 'é€šå ‚æ‹‰éºµ', cat: 'æ‹‰éºµ', area: 'å°ç¥¿', desc: 'é¦–å‰µç”·äººéºµèˆ‡å¥³äººéºµï¼Œå¿…åƒé†ƒè˜¿è””ã€‚' },
                    { name: 'è¿½é¢¨ä¸¸', cat: 'æ‹‰éºµ', area: 'åŒ—è°·', desc: 'åŒ—æµ·é“é¢¨å‘³ï¼Œå‘³å™Œæ¹¯é ­æ¥µåº¦æ¿ƒéƒã€‚' },
                    { name: 'ç‰å®¶æ‹‰éºµ', cat: 'æ‹‰éºµ', area: 'åœ‹éš›é€š', desc: 'ç¨é–€é»‘è’œæ²¹è±šéª¨ï¼Œéºµæ¢Qå½ˆã€‚' },
                    { name: 'åº·é¾æ‹‰éºµ', cat: 'æ‹‰éºµ', area: 'åœ‹éš›é€š', desc: 'å¯é¸é…æ–™è±å¯Œï¼Œå®¢è£½åŒ–å£æ„Ÿã€‚' },
                    { name: 'ä¸€è˜­æ‹‰éºµ', cat: 'æ‹‰éºµ', area: 'é‚£éœ¸', desc: 'ç©©å®šçš„é€£é–ç¾å‘³ï¼Œç¨ç«‹éš”é–“ç”¨é¤ã€‚' },
                    { name: 'éººã‚„ å¶ ã‚‚ã¨ãªã‚Š', cat: 'æ‹‰éºµ', area: 'åè­·', desc: 'åœ¨åœ°äººæœ€æ„›ï¼Œç‰¹æ¿ƒè±šéª¨éœ¸æ°£åè¶³ã€‚' },
                    { name: 'æ³¢è”µæ‹‰éºµ', cat: 'æ‹‰éºµ', area: 'é‚£éœ¸', desc: 'é­šä»‹èˆ‡è±šéª¨çš„å®Œç¾çµåˆã€‚' },
                    { name: 'èµ¤é“æ‹‰éºµ', cat: 'æ‹‰éºµ', area: 'å®œé‡ç£', desc: 'è€æ´¾é“åœ°é¢¨å‘³ï¼Œåƒ¹æ ¼è¦ªæ°‘ã€‚' },
                    { name: 'æ‹‰éºµ å¿—ä¹Ÿ', cat: 'æ‹‰éºµ', area: 'åŒ—è°·', desc: 'æ¿ƒåšç³»ä»£è¡¨ï¼Œå‰ç‡’è‚‰è³ªè»Ÿå«©ã€‚' },
                    { name: 'æ‹‰éºµ é­åŠ›å±‹', cat: 'æ‹‰éºµ', area: 'åŒ—ä¸­åŸ', desc: 'äº¬éƒ½èƒŒè„‚é†¬æ²¹é¢¨æ ¼ï¼Œè”¥èŠ±ç„¡é™çºŒã€‚' },
                    { name: 'éººå‡¦ è›‡ã®ç›®', cat: 'æ‹‰éºµ', area: 'å®œé‡ç£', desc: 'ç²¾ç·»ç…®å¹²æ¹¯é ­ï¼Œæ¸…çˆ½ä¸è² æ“”ã€‚' },
                    // å®šé£Ÿ (12)
                    { name: 'ç€å¡”ç‘ªé£¯ç³°', cat: 'å®šé£Ÿ', area: 'ç‰§å¿—', desc: 'ç¾åšè±¬è‚‰è›‹é£¯ç³°ï¼Œæ²–ç¹©å¿…æ’æ—©é¤ã€‚' },
                    { name: 'èŠ±ç¬ é£Ÿå ‚', cat: 'å®šé£Ÿ', area: 'åœ‹éš›é€š', desc: 'æ˜­å’Œé¢¨é£Ÿå ‚ï¼Œè‹¦ç“œå®šé£Ÿåˆ†é‡å¤§ã€‚' },
                    { name: 'ç™¾å¹´å¤å®¶ å¤§å®¶', cat: 'å®šé£Ÿ', area: 'åè­·', desc: 'é˜¿å¤è±¬æ¶®æ¶®é‹ï¼Œåœ¨ç™¾å¹´å¤å®…ç”¨é¤ã€‚' },
                    { name: 'å¤å®‡åˆ©å³¶ è¦è¦é£¯', cat: 'å®šé£Ÿ', area: 'å¤å®‡åˆ©', desc: 'è’œé¦™å¥¶æ²¹è¦ï¼Œæµ·æ™¯é…ç¾é£Ÿã€‚' },
                    { name: 'JEF Burger', cat: 'å®šé£Ÿ', area: 'é‚£éœ¸', desc: 'é™å®šè‹¦ç“œåˆé¤è‚‰æ¼¢å ¡ã€‚' },
                    { name: 'æµ·äººæ–™ç† æµ·é‚¦ä¸¸', cat: 'å®šé£Ÿ', area: 'æœ¬éƒ¨', desc: 'è¶…æ–°é®®æµ·é®®è“‹é£¯ï¼Œæ°´æ—é¤¨æ—é¦–é¸ã€‚' },
                    { name: 'ä¸€éŠ€é£Ÿå ‚', cat: 'å®šé£Ÿ', area: 'é‚£éœ¸', desc: 'è¶…å¤§ä»½é‡é­šæ¹¯å®šé£Ÿã€‚' },
                    { name: 'æ¿±å±‹è•éº¥éºµ', cat: 'å®šé£Ÿ', area: 'åŒ—è°·', desc: 'è»Ÿéª¨è‚‰å…¥å£å³åŒ–ã€‚' },
                    { name: 'å²¸æœ¬é£Ÿå ‚', cat: 'å®šé£Ÿ', area: 'æœ¬éƒ¨', desc: 'ç™¾å¹´è€åº—ï¼Œæ‰‹å·¥ç°æ°´éºµã€‚' },
                    { name: 'é¦–é‡ŒåŸ ç‰çƒæ–™ç†', cat: 'å®šé£Ÿ', area: 'é¦–é‡Œ', desc: 'å®®å»·å¾¡è†³é«”é©—ã€‚' },
                    { name: 'ç´€ä¹ƒå·', cat: 'å®šé£Ÿ', area: 'æœ¬éƒ¨', desc: 'éš±è—ç‰ˆé˜¿å¤è±¬ç‚¸è±¬æ’ã€‚' },
                    { name: 'é“ä¹‹é©› ç³¸æ»¿', cat: 'å®šé£Ÿ', area: 'ç³¸æ»¿', desc: 'æµ·ç”¢ä¸­å¿ƒç›´æ“Šç”Ÿé­šç‰‡ã€‚' },
                    // ç‰›æ’ç‡’è‚‰ (12)
                    { name: 'å‚‘å…‹ç‰›æ’é¤¨', cat: 'ç‰›æ’æˆ–ç‡’è‚‰', area: 'é‚£éœ¸', desc: '1953å¹´å‰µç«‹ï¼Œå¿…åƒç‰¹é¸ç´ç´„å®¢ã€‚' },
                    { name: 'ç‰›æ’å±‹ 88', cat: 'ç‰›æ’æˆ–ç‡’è‚‰', area: 'åœ‹éš›é€š', desc: 'åˆ†åº—çœ¾å¤šï¼ŒçŸ³å£ç‰›é¸æ“‡å¤šæ¨£ã€‚' },
                    { name: 'ç‰çƒçš„ç‰›', cat: 'ç‰›æ’æˆ–ç‡’è‚‰', area: 'æ©ç´', desc: 'é ‚ç´šç‡’è‚‰ä»£è¡¨ï¼Œè‚‰è³ªæ¥µè‡´ç´°è†©ã€‚' },
                    { name: 'ç‡’è‚‰ ä¹ƒæˆ‘é‚£éœ¸', cat: 'ç‰›æ’æˆ–ç‡’è‚‰', area: 'åè­·', desc: 'è‚‰å•†ç›´ç‡Ÿï¼Œé˜¿å¤è±¬åƒåˆ°é£½CPå€¼é«˜ã€‚' },
                    { name: 'ç‡’è‚‰ æœ¬éƒ¨ç‰›', cat: 'ç‰›æ’æˆ–ç‡’è‚‰', area: 'æœ¬éƒ¨', desc: 'è‡ªå®¶ç‰§å ´ç”¢å’Œç‰›ï¼Œç²çç„¡æ•¸ã€‚' },
                    { name: 'Roins ç‡’è‚‰', cat: 'ç‰›æ’æˆ–ç‡’è‚‰', area: 'é‚£éœ¸', desc: 'ç²¾ç·»æ™‚é«¦ç‡’è‚‰ï¼Œé©åˆç´„æœƒã€‚' },
                    { name: 'ç¢§ éµæ¿ç‡’', cat: 'ç‰›æ’æˆ–ç‡’è‚‰', area: 'é‚£éœ¸', desc: 'å¥³æ€§å¸«å‚…æ“ä½œï¼Œç´°ç·»æœå‹™ã€‚' },
                    { name: 'Steak House 29', cat: 'ç‰›æ’æˆ–ç‡’è‚‰', area: 'é‚£éœ¸', desc: 'å¹³åƒ¹é«˜å“è³ªæ‰‹æ‰“æ¼¢å ¡æ’ã€‚' },
                    { name: 'ç‡’è‚‰ äº”è‹‘', cat: 'ç‰›æ’æˆ–ç‡’è‚‰', area: 'åŒ—ä¸­åŸ', desc: 'å®¶åº­å¼åƒåˆ°é£½ï¼Œé ç®—é¦–é¸ã€‚' },
                    { name: 'è‚‰å±‹ æ–‡å·¦', cat: 'ç‰›æ’æˆ–ç‡’è‚‰', area: 'å®œé‡ç£', desc: 'æ¥µå“è‚‰è³ªåˆ‡ç‰‡ï¼Œå°ˆæ¥­ä¿è­‰ã€‚' },
                    { name: 'Pound Steak', cat: 'ç‰›æ’æˆ–ç‡’è‚‰', area: 'é‚£éœ¸', desc: 'ç§¤é‡è¨ˆåƒ¹ï¼Œå¤§å£åƒè‚‰é¦–é¸ã€‚' },
                    { name: 'æ•˜æ•˜è‹‘ é‚£éœ¸åº—', cat: 'ç‰›æ’æˆ–ç‡’è‚‰', area: 'é‚£éœ¸', desc: 'ç¶“å…¸æ—¥å¼ç‡’è‚‰ï¼Œçª—å¤–æ™¯è§€ç¾ã€‚' },
                    // ç”œé»å’–å•¡ (12)
                    { name: 'å¹¸ç¦é¬†é¤…', cat: 'å°ç”œé»å’–å•¡', area: 'ç€¨é•·å³¶', desc: 'èˆ’èŠ™è•¾å£æ„Ÿï¼Œæµ·æ™¯é£›æ©Ÿç¬¬ä¸€æ’ã€‚' },
                    { name: 'Blue Seal', cat: 'å°ç”œé»å’–å•¡', area: 'å…¨å¢ƒ', desc: 'æ²–ç¹©å†°æ·‡æ·‹ä»£åè©ï¼Œå¤§æ¨æµ·é¹½å‘³ã€‚' },
                    { name: 'oHacorte æ°´æœå¡”', cat: 'å°ç”œé»å’–å•¡', area: 'æ¸¯å·', desc: 'è¶…ç¾å°æ‘è½ï¼Œç²¾ç·»æ°´æœå¡”ã€‚' },
                    { name: 'C&C BREAKFAST', cat: 'å°ç”œé»å’–å•¡', area: 'ç‰§å¿—', desc: 'è¶…å¥½æ‹å·´è¥¿è“æœç¢—ã€‚' },
                    { name: 'ZHYVAGO COFFEE', cat: 'å°ç”œé»å’–å•¡', area: 'åŒ—è°·', desc: 'ç¾åœ‹æ‘æµ·é‚Šå·¥æ¥­é¢¨ã€‚' },
                    { name: 'ä¸‰çŸ¢æœ¬èˆ– èç¿', cat: 'å°ç”œé»å’–å•¡', area: 'æ©ç´', desc: 'å‚³çµ±ç‚¸ç”œç”œåœˆã€‚' },
                    { name: 'ç”°ä¸­æœå¯¦åº—', cat: 'å°ç”œé»å’–å•¡', area: 'æ©ç´', desc: 'è¶…æµ®èª‡èŠ’æœå†°æ·‡æ·‹ã€‚' },
                    { name: 'å¾¡è“å­å¾¡æ®¿', cat: 'å°ç”œé»å’–å•¡', area: 'å…¨å¢ƒ', desc: 'ç´…èŠ‹å¡”å‰µå§‹ï¼Œè²·ä¼´æ‰‹ç¦®é¦–é¸ã€‚' },
                    { name: 'Jungila å’–å•¡', cat: 'å°ç”œé»å’–å•¡', area: 'åŒ—è°·', desc: 'ç•°åœ‹é¢¨æƒ…ï¼Œèººè‘—çœ‹å¤•é™½ã€‚' },
                    { name: 'Fontana Gelato', cat: 'å°ç”œé»å’–å•¡', area: 'åœ‹éš›é€š', desc: 'ä¸ƒå½©æ‰‹å·¥ç¾©å¼å†°æ·‡æ·‹ã€‚' },
                    { name: 'é˜¿å˜‰é‚£ è€å±‹å’–å•¡', cat: 'å°ç”œé»å’–å•¡', area: 'é¦–é‡Œ', desc: 'å¤æ°‘å®…å…§äº«å—å®‰éœåˆèŒ¶ã€‚' },
                    { name: 'oHacorte Bakery', cat: 'å°ç”œé»å’–å•¡', area: 'é‚£éœ¸', desc: 'æ³•å¼åå¸èˆ‡è³ªæ„Ÿé›œè²¨ã€‚' }
                ];

                const filteredFood = computed(() => foodList.filter(f => f.cat === selectedCat.value));
                const totalCost = computed(() => costs.value.reduce((sum, item) => sum + item.amount, 0));

                const saveData = () => localStorage.setItem('OKI_FINAL_STORAGE', JSON.stringify({it: itineraries.value, cs: costs.value}));
                
                const openAddPlan = () => {
                    isEdit.value = false;
                    formPlan.value = { category:'æ™¯é»', name:'', time:'10:00', openTime:'', ticket:'', note:'' };
                    showPlanModal.value = true;
                };

                const openEditPlan = (item, index) => {
                    isEdit.value = true;
                    currentIdx.value = index;
                    formPlan.value = { ...item };
                    showPlanModal.value = true;
                };

                const savePlan = () => {
                    if(!formPlan.value.name) return alert('è«‹è¼¸å…¥åç¨±');
                    if(isEdit.value) itineraries.value[currentDate.value][currentIdx.value] = { ...formPlan.value };
                    else itineraries.value[currentDate.value].push({ ...formPlan.value });
                    saveData(); showPlanModal.value = false;
                };

                const confirmDeletePlan = () => {
                    if(confirm("ç¢ºå®šè¦åˆªé™¤æ­¤è¡Œç¨‹å—ï¼Ÿ")) {
                        itineraries.value[currentDate.value].splice(currentIdx.value, 1);
                        saveData(); showPlanModal.value = false;
                    }
                };

                const openAddCost = () => {
                    const n = prompt("è¼¸å…¥æ¶ˆè²»é …ç›®:");
                    const a = prompt("è¼¸å…¥æ—¥å¹£é‡‘é¡:");
                    if(n && a) {
                        costs.value.push({ name: n, amount: Number(a), cat: 'ä¸€èˆ¬èŠ±è²»' });
                        saveData();
                    }
                };

                const deleteCost = (i) => {
                    if(confirm("ç¢ºå®šè¦ç§»é™¤é€™ç­†èŠ±è²»ï¼Ÿ")) { costs.value.splice(i, 1); saveData(); }
                };

                const addFoodToPlan = (f) => {
                    itineraries.value[currentDate.value].push({ 
                        category:'ç¾é£Ÿ', name: f.name, time:'12:00', openTime:'è¦‹å®˜ç¶²', note: f.desc 
                    });
                    saveData(); activeTab.value = 'plan';
                };

                const goMap = (name) => window.open('https://www.google.com/maps/search/' + encodeURIComponent(name + ' æ²–ç¹©'));
                const getIcon = (cat) => ({ 'èˆªç­':'âœˆï¸','æ™¯é»':'ğŸ–ï¸','ä½å®¿':'ğŸ¨','ç¾é£Ÿ':'ğŸœ','è³¼ç‰©':'ğŸ›ï¸','å…¶ä»–':'ğŸ“' }[cat] || 'ğŸ“');

                onMounted(() => {
                    const saved = localStorage.getItem('OKI_FINAL_STORAGE');
                    if(saved) {
                        const d = JSON.parse(saved);
                        itineraries.value = d.it;
                        costs.value = d.cs || [];
                    }
                });

                return { activeTab, currentDate, selectedCat, categories, tripDays, itineraries, filteredFood, costs, totalCost, goMap, addFoodToPlan, getIcon, openAddPlan, openEditPlan, savePlan, confirmDeletePlan, showPlanModal, formPlan, isEdit, openAddCost, deleteCost, menuItems };
            }
        }).mount('#app');
    </script>
</body>
</html>
