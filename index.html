<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Okinawa 2026 - Visual Edition</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        [v-cloak] { display: none; }
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #f8fafc; padding-bottom: 120px; }
        .header-bg {
            background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.3)), url('https://images.unsplash.com/photo-1559128010-7c1ad6e1b6a5?q=80&w=1000');
            background-size: cover; background-position: center; height: 180px;
            display: flex; flex-direction: column; justify-content: center; align-items: center; color: white;
            border-bottom-left-radius: 40px; border-bottom-right-radius: 40px; position: relative;
        }
        .tab-nav { position: fixed; bottom: 0; left: 0; right: 0; height: 85px; background: rgba(255,255,255,0.9); backdrop-blur: 10px; border-top: 1px solid #e2e8f0; display: flex; justify-content: space-around; align-items: center; z-index: 100; }
        .tab-btn { flex: 1; display: flex; flex-direction: column; align-items: center; color: #94a3b8; font-size: 11px; font-weight: bold; }
        .tab-active { color: #0369a1 !important; }
        .card { background: white; border-radius: 24px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.03); margin-bottom: 16px; transition: transform 0.2s; }
        .card:active { transform: scale(0.98); }
        .food-img { width: 100%; height: 140px; object-fit: cover; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .sortable-ghost { opacity: 0.3; background: #e0f2fe; }
        .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.6); backdrop-blur: 4px; z-index: 200; display: flex; align-items: flex-end; }
        .modal-content { background: white; width: 100%; border-top-left-radius: 30px; border-top-right-radius: 30px; padding: 24px; max-height: 90vh; overflow-y: auto; }
        input, select, textarea { width: 100%; background: #f8fafc; border: 1px solid #e2e8f0; padding: 14px; border-radius: 16px; font-weight: bold; margin-top: 6px; outline: none; }
    </style>
</head>
<body>
    <div id="app" v-cloak>
        <header class="header-bg shadow-2xl">
            <h1 class="text-3xl font-black tracking-widest text-white italic">OKINAWA</h1>
            <p class="text-[10px] font-bold text-white/80 tracking-[0.3em] uppercase mt-1">Summer Trip 2026</p>
            <div class="absolute bottom-4 right-6 bg-white/20 backdrop-blur-md px-4 py-1 rounded-full border border-white/30 flex items-center gap-2">
                <span class="text-xs font-black text-white">04.14 - 04.18</span>
            </div>
        </header>

        <main class="px-5 mt-8">
            <div v-if="activeTab === 'plan'">
                <div class="flex gap-2 mb-8 overflow-x-auto no-scrollbar py-2">
                    <button v-for="day in tripDays" @click="currentDate = day.date"
                        :class="['min-w-[70px] h-20 rounded-3xl flex flex-col items-center justify-center transition-all', currentDate === day.date ? 'bg-sky-800 text-white shadow-xl scale-110' : 'bg-white text-slate-400 shadow-sm']">
                        <span class="text-[10px] font-bold">{{ day.week }}</span>
                        <span class="text-xl font-black">{{ day.dayNum }}</span>
                    </button>
                </div>
                
                <div id="draggable-list">
                    <div v-for="(item, index) in itineraries[currentDate]" :key="item.id || index" class="card" @click="openEditPlan(item, index)">
                        <img v-if="item.img" :src="item.img" class="food-img">
                        <div class="p-5 flex gap-4">
                            <div v-if="!item.img" class="text-3xl flex items-center">{{ getIcon(item.category) }}</div>
                            <div class="flex-1">
                                <div class="flex justify-between items-start">
                                    <h3 class="font-black text-slate-700 leading-tight text-base">{{ item.name }}</h3>
                                    <span class="text-[10px] font-black text-sky-600 bg-sky-50 px-2 py-0.5 rounded ml-2">{{ item.time }}</span>
                                </div>
                                <p class="text-xs text-slate-400 mt-2 leading-relaxed whitespace-pre-line">{{ item.note }}</p>
                            </div>
                            <div class="flex items-center text-slate-200">â‹®â‹®</div>
                        </div>
                    </div>
                </div>
                <button @click="openAddPlan" class="fixed right-6 bottom-28 w-16 h-16 bg-sky-800 text-white rounded-full shadow-2xl text-4xl font-light z-50 flex items-center justify-center">+</button>
            </div>

            <div v-if="activeTab === 'food'">
                <div class="sticky top-0 bg-[#f8fafc] pt-2 pb-6 z-10 px-1">
                    <h2 class="text-2xl font-black text-slate-800 mb-5">ğŸ± æ²–ç¹© 60 é¸</h2>
                    <div class="flex overflow-x-auto gap-3 no-scrollbar">
                        <button v-for="c in categories" @click="selectedCat = c" 
                            :class="['px-6 py-3 rounded-2xl text-xs font-black transition-all whitespace-nowrap', selectedCat === c ? 'bg-sky-800 text-white shadow-lg' : 'bg-white text-slate-400 border border-slate-100 shadow-sm']">{{ c }}</button>
                    </div>
                </div>
                <div class="grid grid-cols-1 gap-6 pb-16">
                    <div v-for="f in filteredFood" class="card group" @click="addFoodToPlan(f)">
                        <div class="relative">
                            <img :src="f.img" class="food-img group-active:scale-105 transition-transform duration-500">
                            <div class="absolute top-3 left-3 bg-white/90 backdrop-blur px-3 py-1 rounded-full text-[10px] font-black text-sky-800">{{ f.area }}</div>
                        </div>
                        <div class="p-5">
                            <div class="flex justify-between items-center mb-2">
                                <h3 class="font-black text-slate-800 text-lg">{{ f.name }}</h3>
                                <div class="w-8 h-8 rounded-full bg-sky-50 flex items-center justify-center text-sky-600 font-bold">âŠ•</div>
                            </div>
                            <p class="text-xs text-slate-500 leading-relaxed">{{ f.desc }}</p>
                        </div>
                    </div>
                </div>
            </div>

            <div v-if="activeTab === 'info'" class="space-y-6 pb-16">
                <h2 class="text-2xl font-black text-slate-800">ğŸ§³ æ—…éŠé‡è¦è³‡è¨Š</h2>
                
                <div class="card p-6 border-l-8 border-red-500 bg-red-50/30">
                    <h3 class="font-black text-red-700 text-lg flex items-center gap-2">ğŸ†˜ ç·Šæ€¥æ•‘åŠ©</h3>
                    <div class="mt-4 space-y-2 text-sm font-bold text-red-600">
                        <p>ğŸš‘ æ¶ˆé˜²/æ•‘è­·: 119</p>
                        <p>ğŸ‘® è­¦å¯Ÿå±€: 110</p>
                        <p>ğŸ¢ é§æ—¥ä»£è¡¨è™•: +81-98-862-2043</p>
                    </div>
                </div>

                <div class="card p-6 border-l-8 border-indigo-600 bg-white">
                    <h3 class="font-black text-slate-700 text-lg mb-6">ğŸ¨ ä½å®¿å¿«é€Ÿå°èˆª</h3>
                    <div class="space-y-8">
                        <div @click="openGoogleMaps('Maeda 1460-4, Onna, Okinawa, Japan')">
                            <p class="text-[10px] font-black text-indigo-500 tracking-widest uppercase">4/14 Maeda Hotel</p>
                            <p class="text-base font-black text-slate-700 mt-1">æ©ç´æ‘ Maeda é£¯åº—</p>
                            <div class="mt-3 py-2 bg-indigo-50 text-indigo-600 text-center rounded-xl text-xs font-black underline underline-offset-4 decoration-2">å•Ÿå‹• Google Maps å°èˆª</div>
                        </div>
                        <div class="pt-6 border-t border-slate-50" @click="openGoogleMaps('1249-8 Inamine, Ozato, Nanjo, Okinawa, Japan')">
                            <p class="text-[10px] font-black text-indigo-500 tracking-widest uppercase">4/15-18 Inamine Hotel</p>
                            <p class="text-base font-black text-slate-700 mt-1">å—åŸå¸‚ Inamine é£¯åº—</p>
                            <div class="mt-3 py-2 bg-indigo-50 text-indigo-600 text-center rounded-xl text-xs font-black underline underline-offset-4 decoration-2">å•Ÿå‹• Google Maps å°èˆª</div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <nav class="tab-nav">
            <button @click="activeTab = 'plan'" :class="['tab-btn', activeTab === 'plan' ? 'tab-active' : '']">ğŸ“<span>è¡Œç¨‹</span></button>
            <button @click="activeTab = 'food'" :class="['tab-btn', activeTab === 'food' ? 'tab-active' : '']">ğŸ±<span>ç¾é£Ÿ</span></button>
            <button @click="activeTab = 'info'" :class="['tab-btn', activeTab === 'info' ? 'tab-active' : '']">ğŸ§³<span>è³‡è¨Š</span></button>
        </nav>

        <div v-if="showPlanModal" class="modal-overlay" @click.self="showPlanModal = false">
            <div class="modal-content shadow-2xl">
                <div class="flex justify-between items-center mb-8">
                    <h3 class="text-2xl font-black text-slate-800">{{ isEdit ? 'ä¿®æ”¹é …ç›®' : 'æ–°å¢è¨ˆç•«' }}</h3>
                    <button @click="showPlanModal = false" class="w-10 h-10 bg-slate-100 rounded-full text-slate-400">âœ•</button>
                </div>
                <div class="space-y-5">
                    <select v-model="formPlan.category"><option v-for="c in ['æ™¯é»','ä½å®¿','ç¾é£Ÿ','è³¼ç‰©','èˆªç­','å…¶ä»–']">{{c}}</option></select>
                    <input v-model="formPlan.name" placeholder="è¼¸å…¥åç¨±">
                    <input type="time" v-model="formPlan.time">
                    <textarea v-model="formPlan.note" rows="5" placeholder="è©³ç´°å‚™è¨»èˆ‡ç­†è¨˜..."></textarea>
                    <div class="flex gap-4 pt-6">
                        <button v-if="isEdit" @click="confirmDeletePlan" class="flex-1 py-5 bg-red-50 text-red-500 rounded-2xl font-black text-xs">åˆªé™¤</button>
                        <button @click="savePlan" class="flex-[2] py-5 bg-sky-800 text-white rounded-2xl font-black text-lg shadow-xl shadow-sky-100">ç¢ºèªå„²å­˜</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp, ref, computed, onMounted, nextTick, watch } = Vue;
        
        // åœ–åº«é…å°
        const imgSet = {
            'æ‹‰éºµ': 'https://images.unsplash.com/photo-1569718212165-3a8278d5f624?q=80&w=400',
            'å®šé£Ÿèˆ‡æ²–ç¹©éºµ': 'https://images.unsplash.com/photo-1547592166-23ac45744acd?q=80&w=400',
            'ç‡’è‚‰æˆ–ç‰›æ’': 'https://images.unsplash.com/photo-1544025162-d76694265947?q=80&w=400',
            'ç”œé»èˆ‡å’–å•¡': 'https://images.unsplash.com/photo-1551024601-bec78aea704b?q=80&w=400'
        };

        createApp({
            setup() {
                const activeTab = ref('plan');
                const currentDate = ref('2026-04-14');
                const selectedCat = ref('æ‹‰éºµ');
                const showPlanModal = ref(false);
                const isEdit = ref(false);
                const currentIdx = ref(null);
                const formPlan = ref({});
                const sortableInstance = ref(null);

                const tripDays = [
                    { date: '2026-04-14', week: 'Day 1', dayNum: '14' },
                    { date: '2026-04-15', week: 'Day 2', dayNum: '15' },
                    { date: '2026-04-16', week: 'Day 3', dayNum: '16' },
                    { date: '2026-04-17', week: 'Day 4', dayNum: '17' },
                    { date: '2026-04-18', week: 'Day 5', dayNum: '18' }
                ];

                const categories = ['æ‹‰éºµ', 'å®šé£Ÿèˆ‡æ²–ç¹©éºµ', 'ç‡’è‚‰æˆ–ç‰›æ’', 'ç”œé»èˆ‡å’–å•¡'];
                
                const foodList = [
                    // æ‹‰éºµé¡ (15)
                    { name: 'æš–æš®æ‹‰éºµ ç‰§å¿—åº—', cat: 'æ‹‰éºµ', area: 'é‚£éœ¸', desc: 'åœ‹éš›é€šæ’éšŠç‹ï¼Œç¶“å…¸ä¹å·é¢¨å‘³ã€‚', img: 'https://images.unsplash.com/photo-1623341214825-9f4f963727da?q=80&w=400' },
                    { name: 'é€šå ‚æ‹‰éºµ å°ç¥¿æœ¬åº—', cat: 'æ‹‰éºµ', area: 'å°ç¥¿', desc: 'ç¶“å…¸ç”·äººéºµ(è±šéª¨)èˆ‡å¥³äººéºµ(é¹½å‘³)ã€‚', img: 'https://images.unsplash.com/photo-1557872246-543cb8338171?q=80&w=400' },
                    { name: 'ç‰çƒæ–°éºµ é€šå ‚ å¯„å®®', cat: 'æ‹‰éºµ', area: 'é‚£éœ¸', desc: 'æœ¬åº—äººå¤šæ™‚çš„æœ€ä½³å‚™æ¡ˆã€‚', img: 'https://images.unsplash.com/photo-1569718212165-3a8278d5f624?q=80&w=400' },
                    { name: 'æ‹‰éºµ åº·é¾', cat: 'æ‹‰éºµ', area: 'é‚£éœ¸', desc: 'è‡ªé¸é…æ–™èˆ‡éºµæ¢ç¡¬åº¦ï¼Œåœ‹éš›é€šå··å…§ã€‚', img: 'https://images.unsplash.com/photo-1591814447921-1f4a9b69990b?q=80&w=400' },
                    { name: 'ç™»é¾é–€', cat: 'æ‹‰éºµ', area: 'é‚£éœ¸', desc: 'æ¿ƒåšæ“”æ“”éºµèåï¼Œè¾£å‘³å±¤æ¬¡è±å¯Œã€‚', img: imgSet['æ‹‰éºµ'] },
                    { name: 'å¤©ä¸‹ä¸€å“ å°ç¥¿åº—', cat: 'æ‹‰éºµ', area: 'é‚£éœ¸', desc: 'æ¹¯é ­æ¿ƒå¦‚æ²¾é†¬ï¼Œæ¥µè‡´è±šéª¨æ„›å¥½è€…å¿…åƒã€‚', img: imgSet['æ‹‰éºµ'] },
                    { name: 'è’æµ·', cat: 'æ‹‰éºµ', area: 'é‚£éœ¸', desc: 'ç‰¹è‰²é­šä»‹é¢¨å‘³èˆ‡æ‰‹å·¥éºµæ¢ã€‚', img: imgSet['æ‹‰éºµ'] },
                    { name: 'é›æ¹¯æ‹‰éºµå±‹ ã„ã—ããµãƒ¼', cat: 'æ‹‰éºµ', area: 'æµ¦æ·»', desc: 'æ¸¯å·å¤–äººä½å®…å€ï¼Œç´”æ·¨é›æ¹¯é®®ç”œã€‚', img: imgSet['æ‹‰éºµ'] },
                    { name: 'Ryukyu Ramen Gomei', cat: 'æ‹‰éºµ', area: 'é‚£éœ¸', desc: 'è³ªæ„Ÿè£æ½¢ï¼Œå‰µæ„ç³»æ‹‰éºµé¦–é¸ã€‚', img: imgSet['æ‹‰éºµ'] },
                    { name: 'è¿½é¢¨ä¸¸', cat: 'æ‹‰éºµ', area: 'åŒ—è°·', desc: 'åŒ—æµ·é“å‘³å™Œé¢¨å‘³ï¼Œç¾åœ‹æ‘äººæ°£åº—ã€‚', img: imgSet['æ‹‰éºµ'] },
                    { name: 'æ—å±‹æ‹‰éºµ', cat: 'æ‹‰éºµ', area: 'åŒ—è°·', desc: 'æ©«æ¿±å®¶ç³»æ¿ƒåšé¢¨æ ¼ã€‚', img: imgSet['æ‹‰éºµ'] },
                    { name: 'Stripes Noodles', cat: 'æ‹‰éºµ', area: 'åŒ—è°·', desc: 'ç‰›æ’é¢¨å‘³æ‹‰éºµï¼Œè¦–è¦ºèˆ‡å‘³è¦ºé›™äº«ã€‚', img: imgSet['æ‹‰éºµ'] },
                    { name: 'æ­¦è—å®¶æ‹‰éºµ', cat: 'æ‹‰éºµ', area: 'æµ¦æ·»', desc: 'æ­£çµ±å®¶ç³»ï¼Œé©åˆæ­é…ç™½é£¯ã€‚', img: imgSet['æ‹‰éºµ'] },
                    { name: 'éºµå®¶ å®‡å’Œ', cat: 'æ‹‰éºµ', area: 'æµ¦æ·»', desc: 'æ¿ƒåšç³»é­šä»‹ã€‚', img: imgSet['æ‹‰éºµ'] },
                    { name: 'é¢¨é›²æ‹‰éºµ', cat: 'æ‹‰éºµ', area: 'æµ¦æ·»', desc: 'é“åœ°åšå¤šç´°éºµã€‚', img: imgSet['æ‹‰éºµ'] },

                    // å®šé£Ÿèˆ‡æ²–ç¹©éºµ (15)
                    { name: 'ç€å¡”ç‘ªé£¯ç³°', cat: 'å®šé£Ÿèˆ‡æ²–ç¹©éºµ', area: 'é‚£éœ¸', desc: 'è±¬è‚‰è›‹é£¯ç³°å§‹ç¥–ï¼Œå¿…è²·æ—©é¤ã€‚', img: 'https://images.unsplash.com/photo-1516684732162-798a0062be99?q=80&w=400' },
                    { name: 'ç”˜å‘³è™• è¬ä¸¸', cat: 'å®šé£Ÿèˆ‡æ²–ç¹©éºµ', area: 'é‚£éœ¸', desc: 'é»é£²å“é€åšç‰‡ï¼Œåå¤å±‹å¼åˆ’ç®—æ—©é¤ã€‚', img: imgSet['å®šé£Ÿèˆ‡æ²–ç¹©éºµ'] },
                    { name: 'å‘³å™Œé£¯å±‹', cat: 'å®šé£Ÿèˆ‡æ²–ç¹©éºµ', area: 'é‚£éœ¸', desc: 'ç™¾å¹´å‘³å™Œè€åº—ï¼Œå®šé£Ÿæº«æ½¤å¥åº·ã€‚', img: imgSet['å®šé£Ÿèˆ‡æ²–ç¹©éºµ'] },
                    { name: 'é¦–é‡Œéºµ (Shuri)', cat: 'å®šé£Ÿèˆ‡æ²–ç¹©éºµ', area: 'é‚£éœ¸', desc: 'é¦–é‡ŒåŸæ—ï¼Œå¼·éŸŒå£æ„Ÿçš„æ‰‹å·¥éºµã€‚', img: imgSet['å®šé£Ÿèˆ‡æ²–ç¹©éºµ'] },
                    { name: 'ç±³å±‹æ¾å€‰', cat: 'å®šé£Ÿèˆ‡æ²–ç¹©éºµ', area: 'å®œé‡ç£', desc: 'ç²¾ç·»ç±³é£Ÿï¼Œç’°å¢ƒéå¸¸å„ªé›…ã€‚', img: imgSet['å®šé£Ÿèˆ‡æ²–ç¹©éºµ'] },
                    { name: 'é«˜æ±Ÿæ´²è•éº¥éºµ', cat: 'å®šé£Ÿèˆ‡æ²–ç¹©éºµ', area: 'æµ¦æ·»', desc: 'è±†è…è•éº¥éºµå§‹ç¥–ï¼Œåœ¨åœ°äººæ¿€æ¨ã€‚', img: imgSet['å®šé£Ÿèˆ‡æ²–ç¹©éºµ'] },
                    { name: 'æ¿±å±‹è•éº¥éºµ', cat: 'å®šé£Ÿèˆ‡æ²–ç¹©éºµ', area: 'åŒ—è°·', desc: 'ç¾åœ‹æ‘å¿…åƒï¼Œè»Ÿéª¨æ’éª¨ç¥ç´šç¾å‘³ã€‚', img: 'https://images.unsplash.com/photo-1618841557871-b4664fbf0c51?q=80&w=400' },
                    { name: 'è¬è‹…è•éº¥éºµ', cat: 'å®šé£Ÿèˆ‡æ²–ç¹©éºµ', area: 'åŒ—è°·', desc: 'åŠå±±è…°æµ·æ™¯ï¼Œæ°›åœæ»¿åˆ†ã€‚', img: imgSet['å®šé£Ÿèˆ‡æ²–ç¹©éºµ'] },
                    { name: 'æ¥šé‚Šè•éº¥éºµ', cat: 'å®šé£Ÿèˆ‡æ²–ç¹©éºµ', area: 'é‚£éœ¸', desc: 'å¤æ°‘å®¶æ”¹è£ï¼Œåˆ†é‡å……è¶³ã€‚', img: imgSet['å®šé£Ÿèˆ‡æ²–ç¹©éºµ'] },
                    { name: 'æ­¥æ²™ç¿ (Ayumi)', cat: 'å®šé£Ÿèˆ‡æ²–ç¹©éºµ', area: 'é‚£éœ¸', desc: 'ç‰§å¿—å¸‚å ´æ—ï¼Œæœ€ç´”ç²¹çš„æ²–ç¹©é»å¿ƒã€‚', img: imgSet['å®šé£Ÿèˆ‡æ²–ç¹©éºµ'] },
                    { name: 'èŠ±ç¬ é£Ÿå ‚', cat: 'å®šé£Ÿèˆ‡æ²–ç¹©éºµ', area: 'é‚£éœ¸', desc: 'å¤§ç¢—å…¬å®¶å¸¸èœï¼Œé«˜CPå€¼é¦–é¸ã€‚', img: imgSet['å®šé£Ÿèˆ‡æ²–ç¹©éºµ'] },
                    { name: 'æ³¢å¸ƒé£Ÿå ‚', cat: 'å®šé£Ÿèˆ‡æ²–ç¹©éºµ', area: 'é‚£éœ¸', desc: 'ä»¥å·¨å¤§ç‚’éºµå±±èåçš„è€é£Ÿå ‚ã€‚', img: imgSet['å®šé£Ÿèˆ‡æ²–ç¹©éºµ'] },
                    { name: 'å‚‘å…‹ç‰›æ’ (Jack)', cat: 'å®šé£Ÿèˆ‡æ²–ç¹©éºµ', area: 'é‚£éœ¸', desc: 'æ˜­å’Œé¢¨æƒ…ï¼Œæ²–ç¹©ç¾è»æ–‡åŒ–ä»£è¡¨åº—ã€‚', img: imgSet['å®šé£Ÿèˆ‡æ²–ç¹©éºµ'] },
                    { name: 'é£Ÿå ‚ ç‚­ç«ç‡’', cat: 'å®šé£Ÿèˆ‡æ²–ç¹©éºµ', area: 'é‚£éœ¸', desc: 'ä¸»æ‰“ç‚­ç«é­šæ–™ç†å®šé£Ÿã€‚', img: imgSet['å®šé£Ÿèˆ‡æ²–ç¹©éºµ'] },
                    { name: 'ç‰§å¿—å¸‚å ´é£Ÿå ‚', cat: 'å®šé£Ÿèˆ‡æ²–ç¹©éºµ', area: 'é‚£éœ¸', desc: 'ä¸€æ¨“è²·æµ·é®®äºŒæ¨“ç…®ã€‚', img: imgSet['å®šé£Ÿèˆ‡æ²–ç¹©éºµ'] },

                    // ç‡’è‚‰ã€ç”œé» (ä»¥ä¸‹ç•¥ï¼Œé‚è¼¯ç›¸åŒï¼Œä¿è­‰ 60 é–“)
                    { name: 'ç‰çƒä¹‹ç‰› æ©ç´åº—', cat: 'ç‡’è‚‰æˆ–ç‰›æ’', area: 'æ©ç´', desc: 'é ‚ç´šå’Œç‰›ï¼Œçµ•å°çš„å…¥å£å³åŒ–ã€‚', img: 'https://images.unsplash.com/photo-1544025162-d76694265947?q=80&w=400' },
                    { name: 'ç‡’è‚‰æœ¬éƒ¨ç‰§å ´', cat: 'ç‡’è‚‰æˆ–ç‰›æ’', area: 'é‚£éœ¸', desc: 'å¾—çæœ¬éƒ¨ç‰›å°ˆè³£ï¼Œè‚‰è³ªæ¥µä½³ã€‚', img: imgSet['ç‡’è‚‰æˆ–ç‰›æ’'] },
                    { name: 'ç‡’è‚‰ç‹ (Kingu)', cat: 'ç‡’è‚‰æˆ–ç‰›æ’', area: 'é‚£éœ¸', desc: 'åœ¨åœ°æœ€å¼·åƒåˆ°é£½ï¼Œå“é …è¶…å¤šã€‚', img: imgSet['ç‡’è‚‰æˆ–ç‰›æ’'] },
                    { name: 'è‚‰å±‹ ã—ã—ã‚ƒ', cat: 'ç‡’è‚‰æˆ–ç‰›æ’', area: 'é‚£éœ¸', desc: 'ç¾åˆ‡ç¾çƒ¤ï¼Œäº«å—å¤§å£åƒè‚‰æ„Ÿã€‚', img: imgSet['ç‡’è‚‰æˆ–ç‰›æ’'] },
                    { name: 'ç‡’è‚‰ 88', cat: 'ç‡’è‚‰æˆ–ç‰›æ’', area: 'é‚£éœ¸', desc: 'ç¶“å…¸é€£é–ï¼Œæ°´æº–ç©©å®šã€‚', img: imgSet['ç‡’è‚‰æˆ–ç‰›æ’'] },
                    { name: 'Roins é‚£éœ¸åº—', cat: 'ç‡’è‚‰æˆ–ç‰›æ’', area: 'é‚£éœ¸', desc: 'é«˜ç´šç‡’è‚‰æ°›åœã€‚', img: imgSet['ç‡’è‚‰æˆ–ç‰›æ’'] },
                    { name: 'ä¸ƒè¼ªç‡’è‚‰å®‰å®‰', cat: 'ç‡’è‚‰æˆ–ç‰›æ’', area: 'é‚£éœ¸', desc: 'å­¸ç”Ÿæ—æœ€æ„›å¹³åƒ¹ç‡’è‚‰ã€‚', img: imgSet['ç‡’è‚‰æˆ–ç‰›æ’'] },
                    { name: 'ç‡’è‚‰é‡‘åŸ', cat: 'ç‡’è‚‰æˆ–ç‰›æ’', area: 'åŒ—è°·', desc: 'çŸ³å£ç‰›å°ˆè³£åº—ã€‚', img: imgSet['ç‡’è‚‰æˆ–ç‰›æ’'] },
                    { name: 'ç‡’è‚‰åŒ—è°·é¾', cat: 'ç‡’è‚‰æˆ–ç‰›æ’', area: 'åŒ—è°·', desc: 'è±ªè¯æµ·é‚Šç‡’è‚‰ã€‚', img: imgSet['ç‡’è‚‰æˆ–ç‰›æ’'] },
                    { name: 'ç‰çƒç‡’è‚‰ NAKAMA', cat: 'ç‡’è‚‰æˆ–ç‰›æ’', area: 'æ©ç´', desc: 'ç¾å¼è¥¿éƒ¨é¢¨ã€‚', img: imgSet['ç‡’è‚‰æˆ–ç‰›æ’'] },
                    { name: 'ç‡’è‚‰æœ¬èˆ– å³¶ç‰›', cat: 'ç‡’è‚‰æˆ–ç‰›æ’', area: 'é‚£éœ¸', desc: 'é˜¿å¤è±¬å¿…é»ã€‚', img: imgSet['ç‡’è‚‰æˆ–ç‰›æ’'] },
                    { name: 'ç‡’è‚‰å·¥æˆ¿ åœ˜', cat: 'ç‡’è‚‰æˆ–ç‰›æ’', area: 'å°ç¥¿', desc: 'é„°è¿‘æ©Ÿå ´æ„›åº—ã€‚', img: imgSet['ç‡’è‚‰æˆ–ç‰›æ’'] },
                    { name: 'æ•˜æ•˜è‹‘ PARCO', cat: 'ç‡’è‚‰æˆ–ç‰›æ’', area: 'æµ¦æ·»', desc: 'å…¨æ²–ç¹©æœ€ç¾æµ·æ™¯åˆ†åº—ã€‚', img: imgSet['ç‡’è‚‰æˆ–ç‰›æ’'] },
                    { name: 'Steak House 88', cat: 'ç‡’è‚‰æˆ–ç‰›æ’', area: 'é‚£éœ¸', desc: 'æœ€å‚³çµ±ç‰›æ’ã€‚', img: imgSet['ç‡’è‚‰æˆ–ç‰›æ’'] },
                    { name: 'Blue Ocean Steak', cat: 'ç‡’è‚‰æˆ–ç‰›æ’', area: 'åŒ—è°·', desc: 'ç²¾å“ç†Ÿæˆç‰›æ’ã€‚', img: imgSet['ç‡’è‚‰æˆ–ç‰›æ’'] },

                    { name: 'å¹¸ç¦é¬†é¤… ç€¨é•·å³¶', cat: 'ç”œé»èˆ‡å’–å•¡', area: 'è±è¦‹åŸ', desc: 'æµ·é‚Šèˆ’èŠ™è•¾ï¼Œçœ‹å¤•é™½é¦–é¸ã€‚', img: 'https://images.unsplash.com/photo-1504113888839-1c8eb50233d3?q=80&w=400' },
                    { name: 'oHacorte æ¸¯å·', cat: 'ç”œé»èˆ‡å’–å•¡', area: 'æµ¦æ·»', desc: 'æ°´æœå¡”ç•Œçš„å¥³ç‹ï¼Œç’°å¢ƒå„ªç¾ã€‚', img: 'https://images.unsplash.com/photo-1519915028121-7d3463d20b13?q=80&w=400' },
                    { name: 'Houki Boshi', cat: 'ç”œé»èˆ‡å’–å•¡', area: 'æµ¦æ·»', desc: 'å¤šç¨®å£å‘³å°å·§å¯éº—éœ²ã€‚', img: imgSet['ç”œé»èˆ‡å’–å•¡'] },
                    { name: 'ZHYVAGO COFFEE', cat: 'ç”œé»èˆ‡å’–å•¡', area: 'åŒ—è°·', desc: 'ç¾åœ‹æ‘æµ·æ¿±ï¼Œå¿…æ‹åœ°æ¨™ã€‚', img: imgSet['ç”œé»èˆ‡å’–å•¡'] },
                    { name: 'çŒªé ­å’–å•¡', cat: 'ç”œé»èˆ‡å’–å•¡', area: 'åŒ—è°·', desc: 'ç›ªé¦éŸ†æ²™ç˜é¢¨å’–å•¡é¤¨ã€‚', img: imgSet['ç”œé»èˆ‡å’–å•¡'] },
                    { name: 'Blue Seal ç‰§å¿—', cat: 'ç”œé»èˆ‡å’–å•¡', area: 'é‚£éœ¸', desc: 'ç¶“å…¸ç´…èŠ‹å†°æ·‡æ·‹ã€‚', img: imgSet['ç”œé»èˆ‡å’–å•¡'] },
                    { name: 'Ball Donut Park', cat: 'ç”œé»èˆ‡å’–å•¡', area: 'é‚£éœ¸', desc: 'ç†±é¨°é¨°çƒå‹ç”œç”œåœˆã€‚', img: imgSet['ç”œé»èˆ‡å’–å•¡'] },
                    { name: 'C&C Breakfast', cat: 'ç”œé»èˆ‡å’–å•¡', area: 'é‚£éœ¸', desc: 'ç¶²ç´…å·´è¥¿è“ç¢—æ—©é¤ã€‚', img: imgSet['ç”œé»èˆ‡å’–å•¡'] },
                    { name: 'ç”°èŠ‹èµ·å¸è›‹ç³•', cat: 'ç”œé»èˆ‡å’–å•¡', area: 'é‚£éœ¸', desc: 'ç¨ç‰¹å£æ„Ÿï¼Œæ²–ç¹©ç‰¹è‰²ã€‚', img: imgSet['ç”œé»èˆ‡å’–å•¡'] },
                    { name: 'Maguro Base', cat: 'ç”œé»èˆ‡å’–å•¡', area: 'é‚£éœ¸', desc: 'æ¸…çˆ½æŒ«å†°ã€‚', img: imgSet['ç”œé»èˆ‡å’–å•¡'] },
                    { name: 'æ¸¯å·å†°æ·‡æ·‹', cat: 'ç”œé»èˆ‡å’–å•¡', area: 'æµ¦æ·»', desc: 'æ‰‹å·¥è›‹é¦™å†°ã€‚', img: imgSet['ç”œé»èˆ‡å’–å•¡'] },
                    { name: 'Coffee Potohoto', cat: 'ç”œé»èˆ‡å’–å•¡', area: 'é‚£éœ¸', desc: 'éš±èº«å¸‚å ´çš„è·äººå’–å•¡ã€‚', img: imgSet['ç”œé»èˆ‡å’–å•¡'] },
                    { name: 'ç”˜å‘³è™• æ¨‚åœ’', cat: 'ç”œé»èˆ‡å’–å•¡', area: 'é‚£éœ¸', desc: 'æ—¥å¼å’Œè“å­ã€‚', img: imgSet['ç”œé»èˆ‡å’–å•¡'] },
                    { name: 'VONGO & ANCHOR', cat: 'ç”œé»èˆ‡å’–å•¡', area: 'åŒ—è°·', desc: 'æµ·æ™¯æ°›åœæ»¿åˆ†ã€‚', img: imgSet['ç”œé»èˆ‡å’–å•¡'] },
                    { name: 'T&M Coffee', cat: 'ç”œé»èˆ‡å’–å•¡', area: 'é‚£éœ¸', desc: 'é«˜å“è³ªæ‰‹æ²–ã€‚', img: imgSet['ç”œé»èˆ‡å’–å•¡'] }
                ];

                const itineraries = ref({
                    '2026-04-14': [{ id: 101, category: 'èˆªç­', name: 'è™èˆª IT728 (KHH â†’ OKA)', time: '15:45', note: 'æŠµé” 18:10\nä»£è™Ÿï¼šG23NJLã€F5E9YC\nè¡Œæï¼š10KG/60KG' }],
                    '2026-04-15': [], '2026-04-16': [], '2026-04-17': [],
                    '2026-04-18': [{ id: 102, category: 'èˆªç­', name: 'è™èˆª IT289 (OKA â†’ KHH)', time: '14:00', note: 'æŠµé” 14:55\nä»£è™Ÿï¼šU1QDSB\nè¡Œæï¼š10KG/75KG' }]
                });

                const filteredFood = computed(() => foodList.filter(f => f.cat === selectedCat.value));

                const initSortable = () => {
                    const el = document.getElementById('draggable-list');
                    if (!el || sortableInstance.value) return;
                    sortableInstance.value = Sortable.create(el, {
                        animation: 150, ghostClass: 'sortable-ghost', handle: '.card',
                        onEnd: (evt) => {
                            const list = [...itineraries.value[currentDate.value]];
                            const [moved] = list.splice(evt.oldIndex, 1);
                            list.splice(evt.newIndex, 0, moved);
                            itineraries.value[currentDate.value] = list;
                            localStorage.setItem('OKI_V7_FINAL', JSON.stringify(itineraries.value));
                        }
                    });
                };

                watch([currentDate, activeTab], async () => { if (activeTab.value === 'plan') { await nextTick(); initSortable(); } });

                const openAddPlan = () => { isEdit.value = false; formPlan.value = { id: Date.now(), category:'æ™¯é»', name:'', time:'10:00', note:'' }; showPlanModal.value = true; };
                const openEditPlan = (item, index) => { isEdit.value = true; currentIdx.value = index; formPlan.value = { ...item }; showPlanModal.value = true; };
                const savePlan = () => {
                    if(isEdit.value) itineraries.value[currentDate.value][currentIdx.value] = { ...formPlan.value };
                    else itineraries.value[currentDate.value].push({ ...formPlan.value });
                    localStorage.setItem('OKI_V7_FINAL', JSON.stringify(itineraries.value)); showPlanModal.value = false;
                };
                const confirmDeletePlan = () => { if(confirm("ç¢ºå®šåˆªé™¤ï¼Ÿ")) { itineraries.value[currentDate.value].splice(currentIdx.value, 1); localStorage.setItem('OKI_V7_FINAL', JSON.stringify(itineraries.value)); showPlanModal.value = false; } };
                
                // æ”¹é€²ï¼šå°‡åœ–ç‰‡ä¸€ä½µå­˜å…¥è¡Œç¨‹
                const addFoodToPlan = (f) => { 
                    itineraries.value[currentDate.value].push({ id: Date.now(), category:'ç¾é£Ÿ', name: f.name, time:'12:00', note: f.desc, img: f.img }); 
                    localStorage.setItem('OKI_V7_FINAL', JSON.stringify(itineraries.value)); activeTab.value = 'plan'; 
                };

                const openGoogleMaps = (address) => window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(address)}`, '_blank');
                const getIcon = (cat) => ({ 'èˆªç­':'âœˆï¸','æ™¯é»':'ğŸ–ï¸','ä½å®¿':'ğŸ¨','ç¾é£Ÿ':'ğŸœ','è³¼ç‰©':'ğŸ›ï¸' }[cat] || 'ğŸ“');

                onMounted(() => {
                    const saved = localStorage.getItem('OKI_V7_FINAL');
                    if(saved) itineraries.value = JSON.parse(saved);
                    nextTick(() => initSortable());
                });

                return { activeTab, currentDate, selectedCat, categories, tripDays, itineraries, filteredFood, openGoogleMaps, addFoodToPlan, getIcon, openAddPlan, openEditPlan, savePlan, confirmDeletePlan, showPlanModal, formPlan, isEdit };
            }
        }).mount('#app');
    </script>
</body>
</html>
