<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Okinawa 2026 - Clean Edition</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        [v-cloak] { display: none; }
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #f1f5f9; padding-bottom: 120px; }
        .header-bg {
            background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.2)), url('https://images.unsplash.com/photo-1559128010-7c1ad6e1b6a5?q=80&w=1000');
            background-size: cover; background-position: center; height: 160px;
            display: flex; flex-direction: column; justify-content: center; align-items: center; color: white;
            border-bottom-left-radius: 30px; border-bottom-right-radius: 30px; position: relative;
        }
        .tab-nav { position: fixed; bottom: 0; left: 0; right: 0; height: 85px; background: white; border-top: 1px solid #e2e8f0; display: flex; justify-content: space-around; align-items: center; z-index: 100; }
        .tab-btn { flex: 1; display: flex; flex-direction: column; align-items: center; color: #94a3b8; font-size: 11px; font-weight: bold; }
        .tab-active { color: #0369a1 !important; }
        .card { background: white; border-radius: 20px; padding: 16px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 12px; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .sortable-ghost { opacity: 0.3; background: #e0f2fe; }
        .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.6); backdrop-blur: 4px; z-index: 200; display: flex; align-items: flex-end; }
        .modal-content { background: white; width: 100%; border-top-left-radius: 30px; border-top-right-radius: 30px; padding: 24px; max-height: 90vh; overflow-y: auto; }
        input, select, textarea { width: 100%; background: #f8fafc; border: 1px solid #e2e8f0; padding: 12px; border-radius: 12px; font-weight: bold; margin-top: 4px; outline: none; }
    </style>
</head>
<body>
    <div id="app" v-cloak>
        <header class="header-bg shadow-lg">
            <h1 class="text-2xl font-black tracking-widest text-white">æ²–ç¹©å¤æ—¥ç´€è¡Œ</h1>
            <div class="absolute bottom-4 right-6 bg-white/20 backdrop-blur-md px-3 py-1 rounded-full border border-white/30 flex items-center gap-2">
                <span class="text-xs font-black text-white">2026.04.14 - 04.18</span>
            </div>
        </header>

        <main class="px-4 mt-6">
            <div v-if="activeTab === 'plan'">
                <div class="flex justify-between gap-2 mb-6">
                    <button v-for="day in tripDays" @click="currentDate = day.date"
                        :class="['flex-1 h-16 rounded-2xl flex flex-col items-center justify-center transition-all', currentDate === day.date ? 'bg-sky-800 text-white shadow-lg scale-105' : 'bg-white text-slate-400 shadow-sm border border-slate-100']">
                        <span class="text-[9px] font-bold uppercase">{{ day.week }}</span>
                        <span class="text-lg font-black">{{ day.dayNum }}</span>
                    </button>
                </div>
                
                <div id="draggable-list">
                    <div v-for="(item, index) in itineraries[currentDate]" :key="item.id || index" class="card" @click="openEditPlan(item, index)">
                        <div class="flex gap-4">
                            <div class="text-3xl flex items-center">{{ getIcon(item.category) }}</div>
                            <div class="flex-1">
                                <div class="flex justify-between items-start">
                                    <h3 class="font-black text-slate-700 leading-tight">{{ item.name }}</h3>
                                    <span class="text-[10px] font-black text-sky-600 bg-sky-50 px-2 py-0.5 rounded ml-2">{{ item.time }}</span>
                                </div>
                                <p class="text-[11px] text-slate-400 mt-2 leading-relaxed whitespace-pre-line">{{ item.note }}</p>
                            </div>
                            <div class="flex items-center text-slate-200">â‹®â‹®</div>
                        </div>
                    </div>
                </div>
                <button @click="openAddPlan" class="fixed right-6 bottom-24 w-14 h-14 bg-sky-800 text-white rounded-full shadow-xl text-3xl font-light z-50">+</button>
            </div>

            <div v-if="activeTab === 'food'">
                <div class="sticky top-0 bg-[#f1f5f9] pt-2 pb-4 z-10">
                    <h2 class="text-xl font-black text-slate-800 mb-4 px-1">ğŸ± æ²–ç¹© 60 é¸ (é‚£éœ¸/ä¸­éƒ¨)</h2>
                    <div class="flex overflow-x-auto gap-2 no-scrollbar px-1">
                        <button v-for="c in categories" @click="selectedCat = c" 
                            :class="['px-5 py-2.5 rounded-full text-xs font-black transition-all whitespace-nowrap', selectedCat === c ? 'bg-sky-800 text-white shadow-md' : 'bg-white text-slate-400 border border-slate-200']">{{ c }}</button>
                    </div>
                </div>
                <div class="space-y-4 pb-10">
                    <div v-for="f in filteredFood" class="card border-b-4 border-slate-100" @click="addFoodToPlan(f)">
                        <div class="flex justify-between items-center mb-2">
                            <h3 class="font-black text-slate-700 text-base">{{ f.name }}</h3>
                            <span class="text-[10px] bg-sky-50 text-sky-600 px-2 py-1 rounded-full font-black">{{ f.area }}</span>
                        </div>
                        <p class="text-[11px] text-slate-500 leading-relaxed">{{ f.desc }}</p>
                        <div class="mt-3 pt-3 border-t border-slate-50 flex justify-between items-center text-[10px] text-slate-300 font-bold">
                            <span>åŠ å…¥ D{{ tripDays.find(d=>d.date===currentDate).dayNum }} è¡Œç¨‹</span>
                            <span class="text-sky-600 text-lg">âŠ•</span>
                        </div>
                    </div>
                </div>
            </div>

            <div v-if="activeTab === 'info'" class="space-y-4 pb-10">
                <h2 class="text-xl font-black text-slate-800">ğŸ§³ æ—…è¡Œé‡è¦è³‡è¨Š</h2>
                <div class="card bg-red-50 border-l-8 border-red-500">
                    <h3 class="font-black text-red-700">ğŸ†˜ ç·Šæ€¥æ•‘åŠ©</h3>
                    <div class="mt-2 space-y-1 text-xs font-bold text-red-600">
                        <p>ğŸ“ å ±è­¦: 110 | æ¶ˆé˜²/æ•‘è­·: 119</p>
                        <p>ğŸ“ é§æ—¥ä»£è¡¨è™•(é‚£éœ¸): +81-98-862-2043</p>
                    </div>
                </div>
                <div class="card border-l-8 border-indigo-600">
                    <h3 class="font-black text-slate-700">ğŸ¨ ä½å®¿åœ°å€å°èˆª</h3>
                    <div class="mt-4 space-y-6">
                        <div @click="openMap('Maeda 1460-4, Onna, Okinawa, Japan')">
                            <p class="text-[10px] font-black text-indigo-600 uppercase">4/14 Onna</p>
                            <p class="text-sm font-bold text-slate-700">æ©ç´æ‘ Maeda é£¯åº—</p>
                            <p class="text-xs text-sky-600 mt-2 font-black underline underline-offset-4">ğŸ“ é–‹å•Ÿ Google Maps å°èˆª</p>
                        </div>
                        <div class="pt-4 border-t border-slate-100" @click="openMap('1249-8 Inamine, Ozato, Nanjo, Okinawa, Japan')">
                            <p class="text-[10px] font-black text-indigo-600 uppercase">4/15-18 Nanjo</p>
                            <p class="text-sm font-bold text-slate-700">å—åŸå¸‚ Inamine é£¯åº—</p>
                            <p class="text-xs text-sky-600 mt-2 font-black underline underline-offset-4">ğŸ“ é–‹å•Ÿ Google Maps å°èˆª</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <nav class="tab-nav">
            <button @click="activeTab = 'plan'" :class="['tab-btn', activeTab === 'plan' ? 'tab-active' : '']">ğŸ“<span>è¡Œç¨‹</span></button>
            <button @click="activeTab = 'food'" :class="['tab-btn', activeTab === 'food' ? 'tab-active' : '']">ğŸ±<span>ç¾é£Ÿ</span></button>
            <button @click="activeTab = 'info'" :class="['tab-btn', activeTab === 'info' ? 'tab-active' : '']">ğŸ§³<span>è³‡è¨Š</span></button>
        </nav>

        <div v-if="showPlanModal" class="modal-overlay" @click.self="showPlanModal = false">
            <div class="modal-content shadow-2xl">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-black text-slate-800">{{ isEdit ? 'ç·¨è¼¯é …ç›®' : 'æ–°å¢è¨ˆç•«' }}</h3>
                    <button @click="showPlanModal = false" class="text-slate-300">âœ•</button>
                </div>
                <div class="space-y-4">
                    <select v-model="formPlan.category"><option v-for="c in ['æ™¯é»','ä½å®¿','ç¾é£Ÿ','è³¼ç‰©','èˆªç­','å…¶ä»–']">{{c}}</option></select>
                    <input v-model="formPlan.name" placeholder="åç¨±">
                    <input type="time" v-model="formPlan.time">
                    <textarea v-model="formPlan.note" rows="5" placeholder="è©³ç´°å‚™è¨»..."></textarea>
                    <div class="flex gap-3 pt-4">
                        <button v-if="isEdit" @click="confirmDeletePlan" class="flex-1 py-4 bg-red-50 text-red-500 rounded-2xl font-black text-xs">åˆªé™¤</button>
                        <button @click="savePlan" class="flex-[2] py-4 bg-sky-800 text-white rounded-2xl font-black">ç¢ºèªå„²å­˜</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp, ref, computed, onMounted, nextTick, watch } = Vue;
        createApp({
            setup() {
                const activeTab = ref('plan');
                const currentDate = ref('2026-04-14');
                const selectedCat = ref('æ‹‰éºµ');
                const showPlanModal = ref(false);
                const isEdit = ref(false);
                const currentIdx = ref(null);
                const formPlan = ref({});
                const sortableInstance = ref(null);

                const tripDays = [
                    { date: '2026-04-14', week: 'D1', dayNum: '14' },
                    { date: '2026-04-15', week: 'D2', dayNum: '15' },
                    { date: '2026-04-16', week: 'D3', dayNum: '16' },
                    { date: '2026-04-17', week: 'D4', dayNum: '17' },
                    { date: '2026-04-18', week: 'D5', dayNum: '18' }
                ];

                const categories = ['æ‹‰éºµ', 'å®šé£Ÿèˆ‡æ²–ç¹©éºµ', 'ç‡’è‚‰æˆ–ç‰›æ’', 'ç”œé»èˆ‡å’–å•¡'];
                
                // å®Œæ•´ 60 å®¶ç¾é£Ÿ
                const foodList = [
                    { name: 'æš–æš®æ‹‰éºµ ç‰§å¿—åº—', cat: 'æ‹‰éºµ', area: 'é‚£éœ¸', desc: 'åœ‹éš›é€šæ’éšŠç‹ï¼Œç¶“å…¸ä¹å·é¢¨å‘³ã€‚' },
                    { name: 'é€šå ‚æ‹‰éºµ å°ç¥¿æœ¬åº—', cat: 'æ‹‰éºµ', area: 'é‚£éœ¸', desc: 'ç¶“å…¸ç”·äººéºµ(è±šéª¨)èˆ‡å¥³äººéºµ(é¹½å‘³)ã€‚' },
                    { name: 'ç‰çƒæ–°éºµ é€šå ‚ å¯„å®®', cat: 'æ‹‰éºµ', area: 'é‚£éœ¸', desc: 'æœ¬åº—äººå¤šæ™‚çš„æœ€ä½³å‚™æ¡ˆã€‚' },
                    { name: 'æ‹‰éºµ åº·é¾', cat: 'æ‹‰éºµ', area: 'é‚£éœ¸', desc: 'è‡ªé¸é…æ–™ï¼Œåœ‹éš›é€šå··å…§ã€‚' },
                    { name: 'ç™»é¾é–€', cat: 'æ‹‰éºµ', area: 'é‚£éœ¸', desc: 'æ¿ƒåšæ“”æ“”éºµèåã€‚' },
                    { name: 'å¤©ä¸‹ä¸€å“ å°ç¥¿åº—', cat: 'æ‹‰éºµ', area: 'é‚£éœ¸', desc: 'æ¹¯é ­æ¿ƒå¦‚æ²¾é†¬ã€‚' },
                    { name: 'è’æµ·', cat: 'æ‹‰éºµ', area: 'é‚£éœ¸', desc: 'ç‰¹è‰²é­šä»‹é¢¨å‘³ã€‚' },
                    { name: 'é›æ¹¯æ‹‰éºµå±‹ ã„ã—ããµãƒ¼', cat: 'æ‹‰éºµ', area: 'æµ¦æ·»', desc: 'æ¸…çˆ½é®®ç”œé›æ¹¯ã€‚' },
                    { name: 'Ryukyu Ramen Gomei', cat: 'æ‹‰éºµ', area: 'é‚£éœ¸', desc: 'å‰µæ„ç³»æ‹‰éºµé¦–é¸ã€‚' },
                    { name: 'è¿½é¢¨ä¸¸', cat: 'æ‹‰éºµ', area: 'åŒ—è°·', desc: 'åŒ—æµ·é“å‘³å™Œé¢¨å‘³ã€‚' },
                    { name: 'æ—å±‹æ‹‰éºµ', cat: 'æ‹‰éºµ', area: 'åŒ—è°·', desc: 'æ©«æ¿±å®¶ç³»æ¿ƒåšé¢¨æ ¼ã€‚' },
                    { name: 'Stripes Noodles', cat: 'æ‹‰éºµ', area: 'åŒ—è°·', desc: 'ç‰›æ’é¢¨å‘³æ‹‰éºµã€‚' },
                    { name: 'æ­¦è—å®¶æ‹‰éºµ', cat: 'æ‹‰éºµ', area: 'æµ¦æ·»', desc: 'æ­£çµ±å®¶ç³»æ¿ƒåšã€‚' },
                    { name: 'éºµå®¶ å®‡å’Œ', cat: 'æ‹‰éºµ', area: 'æµ¦æ·»', desc: 'é­šä»‹é¢¨å‘³å¼·ã€‚' },
                    { name: 'é¢¨é›²æ‹‰éºµ', cat: 'æ‹‰éºµ', area: 'æµ¦æ·»', desc: 'é“åœ°åšå¤šç´°éºµã€‚' },
                    { name: 'ç€å¡”ç‘ªé£¯ç³° ç‰§å¿—åº—', cat: 'å®šé£Ÿèˆ‡æ²–ç¹©éºµ', area: 'é‚£éœ¸', desc: 'è±¬è‚‰è›‹é£¯ç³°å§‹ç¥–ã€‚' },
                    { name: 'ç”˜å‘³è™• è¬ä¸¸', cat: 'å®šé£Ÿèˆ‡æ²–ç¹©éºµ', area: 'é‚£éœ¸', desc: 'åå¤å±‹å¼åˆ’ç®—æ—©é¤ã€‚' },
                    { name: 'å‘³å™Œé£¯å±‹', cat: 'å®šé£Ÿèˆ‡æ²–ç¹©éºµ', area: 'é‚£éœ¸', desc: 'ç™¾å¹´å‘³å™Œè€åº—å®šé£Ÿã€‚' },
                    { name: 'é¦–é‡Œéºµ (Shuri)', cat: 'å®šé£Ÿèˆ‡æ²–ç¹©éºµ', area: 'é‚£éœ¸', desc: 'å¼·éŸŒå£æ„Ÿæ‰‹å·¥éºµã€‚' },
                    { name: 'ç±³å±‹æ¾å€‰', cat: 'å®šé£Ÿèˆ‡æ²–ç¹©éºµ', area: 'å®œé‡ç£', desc: 'é ‚ç´šç±³é£Ÿå®šé£Ÿã€‚' },
                    { name: 'é«˜æ±Ÿæ´²è•éº¥éºµ', cat: 'å®šé£Ÿèˆ‡æ²–ç¹©éºµ', area: 'æµ¦æ·»', desc: 'è±†è…è•éº¥éºµå§‹ç¥–ã€‚' },
                    { name: 'æ¿±å±‹è•éº¥éºµ', cat: 'å®šé£Ÿèˆ‡æ²–ç¹©éºµ', area: 'åŒ—è°·', desc: 'è»Ÿéª¨æ’éª¨ç¥ç´šç¾å‘³ã€‚' },
                    { name: 'è¬è‹…è•éº¥éºµ', cat: 'å®šé£Ÿèˆ‡æ²–ç¹©éºµ', area: 'åŒ—è°·', desc: 'æµ·æ™¯æ°›åœæ»¿åˆ†ã€‚' },
                    { name: 'æ¥šé‚Šè•éº¥éºµ', cat: 'å®šé£Ÿèˆ‡æ²–ç¹©éºµ', area: 'é‚£éœ¸', desc: 'å¤æ°‘å®¶å¤§ä»½é‡ã€‚' },
                    { name: 'æ­¥æ²™ç¿ (Ayumi)', cat: 'å®šé£Ÿèˆ‡æ²–ç¹©éºµ', area: 'é‚£éœ¸', desc: 'ç´”ç²¹æ²–ç¹©é»å¿ƒã€‚' },
                    { name: 'èŠ±ç¬ é£Ÿå ‚', cat: 'å®šé£Ÿèˆ‡æ²–ç¹©éºµ', area: 'é‚£éœ¸', desc: 'é«˜CPå€¼å®¶å¸¸èœã€‚' },
                    { name: 'æ³¢å¸ƒé£Ÿå ‚', cat: 'å®šé£Ÿèˆ‡æ²–ç¹©éºµ', area: 'é‚£éœ¸', desc: 'å·¨å¤§ç‚’éºµå±±ã€‚' },
                    { name: 'å‚‘å…‹ç‰›æ’ (Jack)', cat: 'å®šé£Ÿèˆ‡æ²–ç¹©éºµ', area: 'é‚£éœ¸', desc: 'è€æ´¾æ´‹é£Ÿä»£è¡¨ã€‚' },
                    { name: 'é£Ÿå ‚ ç‚­ç«ç‡’', cat: 'å®šé£Ÿèˆ‡æ²–ç¹©éºµ', area: 'é‚£éœ¸', desc: 'ç‚­ç«é­šæ–™ç†ã€‚' },
                    { name: 'ç‰§å¿—å¸‚å ´é£Ÿå ‚', cat: 'å®šé£Ÿèˆ‡æ²–ç¹©éºµ', area: 'é‚£éœ¸', desc: 'æµ·é®®ä»£å®¢æ–™ç†ã€‚' },
                    { name: 'ç‰çƒä¹‹ç‰› æ©ç´åº—', cat: 'ç‡’è‚‰æˆ–ç‰›æ’', area: 'æ©ç´', desc: 'é ‚ç´šå’Œç‰›èåŒ–å£æ„Ÿã€‚' },
                    { name: 'ç‡’è‚‰æœ¬éƒ¨ç‰§å ´', cat: 'ç‡’è‚‰æˆ–ç‰›æ’', area: 'é‚£éœ¸', desc: 'å¾—çæœ¬éƒ¨ç‰›å°ˆè³£ã€‚' },
                    { name: 'ç‡’è‚‰ç‹ (Kingu)', cat: 'ç‡’è‚‰æˆ–ç‰›æ’', area: 'é‚£éœ¸', desc: 'æœ€å¼·äººæ°£åƒåˆ°é£½ã€‚' },
                    { name: 'è‚‰å±‹ ã—ã—ã‚ƒ', cat: 'ç‡’è‚‰æˆ–ç‰›æ’', area: 'é‚£éœ¸', desc: 'ç¾åˆ‡ç¾çƒ¤äº«å—ã€‚' },
                    { name: 'ç‡’è‚‰ 88', cat: 'ç‡’è‚‰æˆ–ç‰›æ’', area: 'é‚£éœ¸', desc: 'æ°´æº–ç©©å®šè€ç‰Œã€‚' },
                    { name: 'Roins é‚£éœ¸åº—', cat: 'ç‡’è‚‰æˆ–ç‰›æ’', area: 'é‚£éœ¸', desc: 'é«˜ç´šç‡’è‚‰æ°›åœã€‚' },
                    { name: 'ä¸ƒè¼ªç‡’è‚‰å®‰å®‰', cat: 'ç‡’è‚‰æˆ–ç‰›æ’', area: 'é‚£éœ¸', desc: 'å¹³åƒ¹ç‡’è‚‰ä»£è¡¨ã€‚' },
                    { name: 'ç‡’è‚‰é‡‘åŸ', cat: 'ç‡’è‚‰æˆ–ç‰›æ’', area: 'åŒ—è°·', desc: 'çŸ³å£ç‰›å°ˆé–€åº—ã€‚' },
                    { name: 'ç‡’è‚‰åŒ—è°·é¾', cat: 'ç‡’è‚‰æˆ–ç‰›æ’', area: 'åŒ—è°·', desc: 'è±ªè¯æµ·é‚Šç‡’è‚‰ã€‚' },
                    { name: 'ç‰çƒç‡’è‚‰ NAKAMA', cat: 'ç‡’è‚‰æˆ–ç‰›æ’', area: 'æ©ç´', desc: 'ç¾å¼è¥¿éƒ¨é¢¨ã€‚' },
                    { name: 'ç‡’è‚‰æœ¬èˆ– å³¶ç‰›', cat: 'ç‡’è‚‰æˆ–ç‰›æ’', area: 'é‚£éœ¸', desc: 'é˜¿å¤è±¬å¿…é»ã€‚' },
                    { name: 'ç‡’è‚‰å·¥æˆ¿ åœ˜', cat: 'ç‡’è‚‰æˆ–ç‰›æ’', area: 'å°ç¥¿', desc: 'åœ¨åœ°äººæ„›åº—ã€‚' },
                    { name: 'æ•˜æ•˜è‹‘ PARCO', cat: 'ç‡’è‚‰æˆ–ç‰›æ’', area: 'æµ¦æ·»', desc: 'æµ·æ™¯ç¬¬ä¸€æ’ã€‚' },
                    { name: 'Steak House 88', cat: 'ç‡’è‚‰æˆ–ç‰›æ’', area: 'é‚£éœ¸', desc: 'å‚³çµ±ç¾å¼ç‰›æ’ã€‚' },
                    { name: 'Blue Ocean Steak', cat: 'ç‡’è‚‰æˆ–ç‰›æ’', area: 'åŒ—è°·', desc: 'ç²¾å“ç†Ÿæˆç‰›æ’ã€‚' },
                    { name: 'å¹¸ç¦é¬†é¤… ç€¨é•·å³¶', cat: 'ç”œé»èˆ‡å’–å•¡', area: 'è±è¦‹åŸ', desc: 'å¤•é™½èˆ’èŠ™è•¾ã€‚' },
                    { name: 'oHacorte æ¸¯å·', cat: 'ç”œé»èˆ‡å’–å•¡', area: 'æµ¦æ·»', desc: 'æ°´æœå¡”ç•Œå¥³ç‹ã€‚' },
                    { name: 'Houki Boshi', cat: 'ç”œé»èˆ‡å’–å•¡', area: 'æµ¦æ·»', desc: 'é»‘ç³–å¯éº—éœ²ã€‚' },
                    { name: 'ZHYVAGO COFFEE', cat: 'ç”œé»èˆ‡å’–å•¡', area: 'åŒ—è°·', desc: 'ç¾åœ‹æ‘åœ°æ¨™ã€‚' },
                    { name: 'çŒªé ­å’–å•¡', cat: 'ç”œé»èˆ‡å’–å•¡', area: 'åŒ—è°·', desc: 'æ²™ç˜é¢¨å’–å•¡é¤¨ã€‚' },
                    { name: 'Blue Seal ç‰§å¿—', cat: 'ç”œé»èˆ‡å’–å•¡', area: 'é‚£éœ¸', desc: 'ç¶“å…¸ç´…èŠ‹å†°æ·‡æ·‹ã€‚' },
                    { name: 'Ball Donut Park', cat: 'ç”œé»èˆ‡å’–å•¡', area: 'é‚£éœ¸', desc: 'çƒå‹ç”œç”œåœˆã€‚' },
                    { name: 'C&C Breakfast', cat: 'ç”œé»èˆ‡å’–å•¡', area: 'é‚£éœ¸', desc: 'å·´è¥¿è“ç¢—æ—©é¤ã€‚' },
                    { name: 'ç”°èŠ‹èµ·å¸è›‹ç³•', cat: 'ç”œé»èˆ‡å’–å•¡', area: 'é‚£éœ¸', desc: 'ç‰¹è‰²ç”°èŠ‹é¢¨å‘³ã€‚' },
                    { name: 'Maguro Base', cat: 'ç”œé»èˆ‡å’–å•¡', area: 'é‚£éœ¸', desc: 'æ¸…çˆ½æ—¥æœ¬æŒ«å†°ã€‚' },
                    { name: 'æ¸¯å·å†°æ·‡æ·‹', cat: 'ç”œé»èˆ‡å’–å•¡', area: 'æµ¦æ·»', desc: 'è·äººæ‰‹å·¥å†°ã€‚' },
                    { name: 'Coffee Potohoto', cat: 'ç”œé»èˆ‡å’–å•¡', area: 'é‚£éœ¸', desc: 'å¸‚å ´è·äººå’–å•¡ã€‚' },
                    { name: 'ç”˜å‘³è™• æ¨‚åœ’', cat: 'ç”œé»èˆ‡å’–å•¡', area: 'é‚£éœ¸', desc: 'æ—¥å¼å’Œè“å­ã€‚' },
                    { name: 'VONGO & ANCHOR', cat: 'ç”œé»èˆ‡å’–å•¡', area: 'åŒ—è°·', desc: 'è³ªæ„Ÿæµ·æ™¯æ°›åœã€‚' },
                    { name: 'T&M Coffee', cat: 'ç”œé»èˆ‡å’–å•¡', area: 'é‚£éœ¸', desc: 'é«˜å“è³ªæ‰‹æ²–ã€‚' }
                ];

                const itineraries = ref({
                    '2026-04-14': [{ id: 101, category: 'èˆªç­', name: 'è™èˆª IT728 (KHH â†’ OKA)', time: '15:45', note: 'æŠµé” 18:10\nä»£è™Ÿï¼šG23NJLã€F5E9YC\nè¡Œæï¼š10KG/60KG' }],
                    '2026-04-15': [], '2026-04-16': [], '2026-04-17': [],
                    '2026-04-18': [{ id: 102, category: 'èˆªç­', name: 'è™èˆª IT289 (OKA â†’ KHH)', time: '14:00', note: 'æŠµé” 14:55\nä»£è™Ÿï¼šU1QDSB\nè¡Œæï¼š10KG/75KG' }]
                });

                const filteredFood = computed(() => foodList.filter(f => f.cat === selectedCat.value));

                const initSortable = () => {
                    const el = document.getElementById('draggable-list');
                    if (!el || sortableInstance.value) return;
                    sortableInstance.value = Sortable.create(el, {
                        animation: 150, ghostClass: 'sortable-ghost', handle: '.card',
                        onEnd: (evt) => {
                            const list = [...itineraries.value[currentDate.value]];
                            const [moved] = list.splice(evt.oldIndex, 1);
                            list.splice(evt.newIndex, 0, moved);
                            itineraries.value[currentDate.value] = list;
                            localStorage.setItem('OKI_V8_CLEAN', JSON.stringify(itineraries.value));
                        }
                    });
                };

                watch([currentDate, activeTab], async () => { if (activeTab.value === 'plan') { await nextTick(); initSortable(); } });

                const openAddPlan = () => { isEdit.value = false; formPlan.value = { id: Date.now(), category:'æ™¯é»', name:'', time:'10:00', note:'' }; showPlanModal.value = true; };
                const openEditPlan = (item, index) => { isEdit.value = true; currentIdx.value = index; formPlan.value = { ...item }; showPlanModal.value = true; };
                const savePlan = () => {
                    if(isEdit.value) itineraries.value[currentDate.value][currentIdx.value] = { ...formPlan.value };
                    else itineraries.value[currentDate.value].push({ ...formPlan.value });
                    localStorage.setItem('OKI_V8_CLEAN', JSON.stringify(itineraries.value)); showPlanModal.value = false;
                };
                const confirmDeletePlan = () => { if(confirm("åˆªé™¤æ­¤é …ï¼Ÿ")) { itineraries.value[currentDate.value].splice(currentIdx.value, 1); localStorage.setItem('OKI_V8_CLEAN', JSON.stringify(itineraries.value)); showPlanModal.value = false; } };
                const addFoodToPlan = (f) => { 
                    itineraries.value[currentDate.value].push({ id: Date.now(), category:'ç¾é£Ÿ', name: f.name, time:'12:00', note: f.desc }); 
                    localStorage.setItem('OKI_V8_CLEAN', JSON.stringify(itineraries.value)); activeTab.value = 'plan'; 
                };

                const openMap = (address) => window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(address)}`, '_blank');
                const getIcon = (cat) => ({ 'èˆªç­':'âœˆï¸','æ™¯é»':'ğŸ–ï¸','ä½å®¿':'ğŸ¨','ç¾é£Ÿ':'ğŸœ','è³¼ç‰©':'ğŸ›ï¸' }[cat] || 'ğŸ“');

                onMounted(() => {
                    const saved = localStorage.getItem('OKI_V8_CLEAN');
                    if(saved) itineraries.value = JSON.parse(saved);
                    nextTick(() => initSortable());
                });

                return { activeTab, currentDate, selectedCat, categories, tripDays, itineraries, filteredFood, openMap, addFoodToPlan, getIcon, openAddPlan, openEditPlan, savePlan, confirmDeletePlan, showPlanModal, formPlan, isEdit };
            }
        }).mount('#app');
    </script>
</body>
</html>
