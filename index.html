<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Okinawa 2026 - Master List</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        [v-cloak] { display: none; }
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #f1f5f9; padding-bottom: 120px; }
        .header-bg {
            background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.2)), url('https://images.unsplash.com/photo-1559128010-7c1ad6e1b6a5?q=80&w=1000');
            background-size: cover; background-position: center; height: 160px;
            display: flex; flex-direction: column; justify-content: center; align-items: center; color: white;
            border-bottom-left-radius: 30px; border-bottom-right-radius: 30px; position: relative;
        }
        .tab-nav { position: fixed; bottom: 0; left: 0; right: 0; height: 85px; background: white; border-top: 1px solid #e2e8f0; display: flex; justify-content: space-around; align-items: center; z-index: 100; }
        .tab-btn { flex: 1; display: flex; flex-direction: column; align-items: center; color: #94a3b8; font-size: 11px; font-weight: bold; }
        .tab-active { color: #0369a1 !important; }
        .card { background: white; border-radius: 20px; padding: 16px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 12px; transition: transform 0.2s; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .sortable-ghost { opacity: 0.3; background: #e0f2fe; }
        .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.6); backdrop-blur: 4px; z-index: 200; display: flex; align-items: flex-end; }
        .modal-content { background: white; width: 100%; border-top-left-radius: 30px; border-top-right-radius: 30px; padding: 24px; max-height: 90vh; overflow-y: auto; }
        input, select, textarea { width: 100%; background: #f8fafc; border: 1px solid #e2e8f0; padding: 12px; border-radius: 12px; font-weight: bold; margin-top: 4px; outline: none; }
    </style>
</head>
<body>
    <div id="app" v-cloak>
        <header class="header-bg">
            <h1 class="text-2xl font-black tracking-widest text-white">æ²–ç¹©å¤æ—¥ç´€è¡Œ</h1>
            <div class="absolute bottom-4 right-6 bg-white/20 backdrop-blur-md px-3 py-1 rounded-full border border-white/30 flex items-center gap-2">
                <span class="text-xs font-black text-white tracking-tighter">4/14 - 4/18 OKINAWA</span>
            </div>
        </header>

        <main class="px-4 mt-6">
            <div v-if="activeTab === 'plan'">
                <div class="flex gap-2 mb-6">
                    <button v-for="day in tripDays" @click="currentDate = day.date"
                        :class="['flex-1 h-16 rounded-2xl flex flex-col items-center justify-center transition-all', currentDate === day.date ? 'bg-sky-800 text-white shadow-lg scale-105' : 'bg-white text-slate-400 shadow-sm']">
                        <span class="text-[9px] font-bold">{{ day.week }}</span>
                        <span class="text-lg font-black">{{ day.dayNum }}</span>
                    </button>
                </div>
                
                <div id="draggable-list">
                    <div v-for="(item, index) in itineraries[currentDate]" :key="item.id || index" class="card" @click="openEditPlan(item, index)">
                        <div class="flex gap-4">
                            <div class="text-3xl flex items-center">{{ getIcon(item.category) }}</div>
                            <div class="flex-1">
                                <div class="flex justify-between items-start">
                                    <h3 class="font-black text-slate-700 leading-tight">{{ item.name }}</h3>
                                    <span class="text-[10px] font-black text-sky-600 bg-sky-50 px-2 py-0.5 rounded ml-2">{{ item.time }}</span>
                                </div>
                                <p class="text-[11px] text-slate-400 mt-2 leading-relaxed whitespace-pre-line">{{ item.note }}</p>
                            </div>
                            <div class="flex items-center text-slate-200">â‹®â‹®</div>
                        </div>
                    </div>
                </div>

                <button @click="openAddPlan" class="fixed right-6 bottom-24 w-14 h-14 bg-sky-800 text-white rounded-full shadow-xl text-3xl font-light z-50">+</button>
            </div>

            <div v-if="activeTab === 'food'">
                <div class="sticky top-0 bg-[#f1f5f9] pt-2 pb-4 z-10">
                    <h2 class="text-xl font-black text-slate-800 mb-4">ğŸ± æ²–ç¹© 60 é¸ (é‚£éœ¸/ä¸­éƒ¨)</h2>
                    <div class="flex overflow-x-auto gap-2 no-scrollbar px-1">
                        <button v-for="c in categories" @click="selectedCat = c" 
                            :class="['px-5 py-2.5 rounded-full text-xs font-black transition-all whitespace-nowrap', selectedCat === c ? 'bg-sky-800 text-white shadow-md' : 'bg-white text-slate-400 border border-slate-200']">{{ c }}</button>
                    </div>
                </div>
                <div class="space-y-4 pb-10">
                    <div v-for="f in filteredFood" class="card border-b-4 border-slate-100" @click="addFoodToPlan(f)">
                        <div class="flex justify-between items-center mb-2">
                            <h3 class="font-black text-slate-700">{{ f.name }}</h3>
                            <span class="text-[9px] bg-sky-50 text-sky-600 px-2 py-1 rounded-full font-black">{{ f.area }}</span>
                        </div>
                        <p class="text-[11px] text-slate-500 leading-relaxed">{{ f.desc }}</p>
                        <div class="mt-3 pt-3 border-t border-slate-50 flex justify-between items-center">
                            <span class="text-[9px] text-slate-300 font-bold">é»æ“ŠåŠ å…¥ D{{ tripDays.find(d=>d.date===currentDate).dayNum }} è¡Œç¨‹</span>
                            <span class="text-sky-600 text-lg">âŠ•</span>
                        </div>
                    </div>
                </div>
            </div>

            <div v-if="activeTab === 'info'" class="space-y-4 pb-10">
                <h2 class="text-xl font-black text-slate-800">ğŸ§³ æ—…è¡Œé‡è¦è³‡è¨Š</h2>
                <div class="card bg-red-50 border-l-8 border-red-500">
                    <h3 class="font-black text-red-700">ğŸ†˜ ç·Šæ€¥æ•‘åŠ©</h3>
                    <div class="mt-3 space-y-1 text-xs font-bold text-red-600">
                        <p>ğŸ“ å ±è­¦: 110 | æ¶ˆé˜²/æ•‘è­·: 119</p>
                        <p>ğŸ“ é§æ—¥ä»£è¡¨è™•: +81-98-862-2043</p>
                    </div>
                </div>
                <div class="card border-l-8 border-indigo-600">
                    <h3 class="font-black text-slate-700">ğŸ¨ ä½å®¿ç²¾ç¢ºåº§æ¨™</h3>
                    <div class="mt-4 space-y-6">
                        <div @click="goMapCoords(26.4363451, 127.765087)">
                            <p class="text-[10px] font-black text-indigo-600">4/14 æ©ç´æ‘ Maeda</p>
                            <p class="text-xs text-slate-400 mt-1 underline decoration-dotted">é»æ“Šå•Ÿå‹•ç¶“ç·¯åº¦å°èˆª ğŸ“</p>
                        </div>
                        <div class="pt-4 border-t border-slate-100" @click="goMapCoords(26.1583872, 127.7345247)">
                            <p class="text-[10px] font-black text-indigo-600">4/15 å—åŸå¸‚ Inamine</p>
                            <p class="text-xs text-slate-400 mt-1 underline decoration-dotted">é»æ“Šå•Ÿå‹•ç¶“ç·¯åº¦å°èˆª ğŸ“</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <div v-if="showPlanModal" class="modal-overlay" @click.self="showPlanModal = false">
            <div class="modal-content">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-black text-slate-800">{{ isEdit ? 'ç·¨è¼¯è¡Œç¨‹' : 'æ–°å¢é …ç›®' }}</h3>
                    <button @click="showPlanModal = false" class="text-slate-300">âœ•</button>
                </div>
                <div class="space-y-4">
                    <select v-model="formPlan.category"><option v-for="c in ['æ™¯é»','ä½å®¿','ç¾é£Ÿ','è³¼ç‰©','èˆªç­','å…¶ä»–']">{{c}}</option></select>
                    <input v-model="formPlan.name" placeholder="åç¨±">
                    <input type="time" v-model="formPlan.time">
                    <textarea v-model="formPlan.note" rows="3" placeholder="å‚™è¨»å…§å®¹..."></textarea>
                    <div class="flex gap-3 pt-4">
                        <button v-if="isEdit" @click="confirmDeletePlan" class="flex-1 py-4 bg-red-50 text-red-500 rounded-2xl font-black text-xs">åˆªé™¤</button>
                        <button @click="savePlan" class="flex-[2] py-4 bg-sky-800 text-white rounded-2xl font-black">å„²å­˜</button>
                    </div>
                </div>
            </div>
        </div>

        <nav class="tab-nav">
            <button @click="activeTab = 'plan'" :class="['tab-btn', activeTab === 'plan' ? 'tab-active' : '']">ğŸ“<span>è¡Œç¨‹</span></button>
            <button @click="activeTab = 'food'" :class="['tab-btn', activeTab === 'food' ? 'tab-active' : '']">ğŸ±<span>ç¾é£Ÿ</span></button>
            <button @click="activeTab = 'info'" :class="['tab-btn', activeTab === 'info' ? 'tab-active' : '']">ğŸ§³<span>è³‡è¨Š</span></button>
        </nav>
    </div>

    <script>
        const { createApp, ref, computed, onMounted, nextTick, watch } = Vue;
        createApp({
            setup() {
                const activeTab = ref('plan');
                const currentDate = ref('2026-04-14');
                const selectedCat = ref('æ‹‰éºµ');
                const showPlanModal = ref(false);
                const isEdit = ref(false);
                const currentIdx = ref(null);
                const formPlan = ref({});
                const sortableInstance = ref(null);

                const tripDays = [
                    { date: '2026-04-14', week: 'D1', dayNum: '14' },
                    { date: '2026-04-15', week: 'D2', dayNum: '15' },
                    { date: '2026-04-16', week: 'D3', dayNum: '16' },
                    { date: '2026-04-17', week: 'D4', dayNum: '17' },
                    { date: '2026-04-18', week: 'D5', dayNum: '18' }
                ];

                const categories = ['æ‹‰éºµ', 'å®šé£Ÿèˆ‡æ²–ç¹©éºµ', 'ç‡’è‚‰æˆ–ç‰›æ’', 'ç”œé»èˆ‡å’–å•¡'];
                
                // 15x4 = 60 é–“åå–® (æ’é™¤åŒ—éƒ¨)
                const foodList = [
                    // æ‹‰éºµ (15)
                    { name: 'æš–æš®æ‹‰éºµ ç‰§å¿—åº—', cat: 'æ‹‰éºµ', area: 'é‚£éœ¸', desc: 'åœ‹éš›é€šæ’éšŠååº—ï¼Œå¯è‡ªé¸æ¿ƒåšåº¦ã€‚' },
                    { name: 'é€šå ‚æ‹‰éºµ å°ç¥¿æœ¬åº—', cat: 'æ‹‰éºµ', area: 'é‚£éœ¸', desc: 'ç¶“å…¸ç”·äººéºµ(è±šéª¨)èˆ‡å¥³äººéºµ(é¹½å‘³)ã€‚' },
                    { name: 'ç‰çƒæ–°éºµ é€šå ‚ å¯„å®®åº—', cat: 'æ‹‰éºµ', area: 'é‚£éœ¸', desc: 'æœ¬åº—äººå¤šæ™‚çš„å¥½å»è™•ã€‚' },
                    { name: 'æ‹‰éºµ åº·é¾', cat: 'æ‹‰éºµ', area: 'é‚£éœ¸', desc: 'åœ‹éš›é€šå··å…§ï¼Œè‡ªé¸é…æ–™è±å¯Œã€‚' },
                    { name: 'ç™»é¾é–€', cat: 'æ‹‰éºµ', area: 'é‚£éœ¸', desc: 'æ¿ƒåšæ“”æ“”éºµèåã€‚' },
                    { name: 'å¤©ä¸‹ä¸€å“ å°ç¥¿åº—', cat: 'æ‹‰éºµ', area: 'é‚£éœ¸', desc: 'æ¿ƒåšç³»æ¥µè‡´ï¼Œæ¹¯é ­å¦‚æ²¾é†¬ã€‚' },
                    { name: 'è’æµ·', cat: 'æ‹‰éºµ', area: 'é‚£éœ¸', desc: 'ç‰¹è‰²é­šä»‹è±šéª¨æ¹¯é ­ã€‚' },
                    { name: 'é›æ¹¯æ‹‰éºµå±‹ ã„ã—ããµãƒ¼', cat: 'æ‹‰éºµ', area: 'æµ¦æ·»', desc: 'æ¸¯å·å¤–äººä½å®…å€ï¼Œæ¸…çˆ½é›æ¹¯ã€‚' },
                    { name: 'Ryukyu Ramen Gomei', cat: 'æ‹‰éºµ', area: 'é‚£éœ¸', desc: 'è³ªæ„Ÿè£æ½¢ï¼Œå‰µæ„ç³»æ‹‰éºµã€‚' },
                    { name: 'è¿½é¢¨ä¸¸', cat: 'æ‹‰éºµ', area: 'åŒ—è°·', desc: 'åŒ—æµ·é“å‘³å™Œé¢¨å‘³ï¼Œç¾åœ‹æ‘äººæ°£åº—ã€‚' },
                    { name: 'æ—å±‹æ‹‰éºµ', cat: 'æ‹‰éºµ', area: 'åŒ—è°·', desc: 'æ©«æ¿±å®¶ç³»æ¿ƒåšé¢¨æ ¼ã€‚' },
                    { name: 'Stripes Noodles', cat: 'æ‹‰éºµ', area: 'åŒ—è°·', desc: 'ç‰›æ’é¢¨å‘³æ‹‰éºµï¼Œæ¥µå…·å‰µæ„ã€‚' },
                    { name: 'æ­¦è—å®¶æ‹‰éºµ', cat: 'æ‹‰éºµ', area: 'æµ¦æ·»', desc: 'æ¿ƒåšå®¶ç³»æ‹‰éºµæ„›å¥½è€…å¿…åƒã€‚' },
                    { name: 'éºµå®¶ å®‡å’Œ', cat: 'æ‹‰éºµ', area: 'æµ¦æ·»', desc: 'é­šä»‹é¢¨å‘³å¼·çƒˆã€‚' },
                    { name: 'é¢¨é›²æ‹‰éºµ', cat: 'æ‹‰éºµ', area: 'æµ¦æ·»', desc: 'é“åœ°åšå¤šç´°éºµã€‚' },

                    // å®šé£Ÿèˆ‡æ²–ç¹©éºµ (15)
                    { name: 'ç€å¡”ç‘ªé£¯ç³° ç‰§å¿—åº—', cat: 'å®šé£Ÿèˆ‡æ²–ç¹©éºµ', area: 'é‚£éœ¸', desc: 'è±¬è‚‰è›‹é£¯ç³°å§‹ç¥–ï¼Œå¿…æ’æ—©é¤ã€‚' },
                    { name: 'ç”˜å‘³è™• è¬ä¸¸', cat: 'å®šé£Ÿèˆ‡æ²–ç¹©éºµ', area: 'é‚£éœ¸', desc: 'è¶…åˆ’ç®—æ—¥å¼æ—©é»ï¼Œé»é£²æ–™é€é¤ã€‚' },
                    { name: 'å‘³å™Œé£¯å±‹ ç‰é‚£éœ¸å‘³å™Œ', cat: 'å®šé£Ÿèˆ‡æ²–ç¹©éºµ', area: 'é‚£éœ¸', desc: 'ç™¾å¹´å‘³å™Œè€åº—ï¼Œå®šé£Ÿéå¸¸æº«æ½¤ã€‚' },
                    { name: 'é¦–é‡Œéºµ (Shuri Soba)', cat: 'å®šé£Ÿèˆ‡æ²–ç¹©éºµ', area: 'é‚£éœ¸', desc: 'é¦–é‡ŒåŸæ—ï¼Œæ¥µå…¶å¼·éŸŒçš„ç‰¹è‰²éºµæ¢ã€‚' },
                    { name: 'ç±³å±‹æ¾å€‰', cat: 'å®šé£Ÿèˆ‡æ²–ç¹©éºµ', area: 'å®œé‡ç£', desc: 'ä»¥é ‚ç´šç±³é£Ÿç‚ºä¸»çš„è³ªæ„Ÿå®šé£Ÿã€‚' },
                    { name: 'é«˜æ±Ÿæ´²è•éº¥éºµ', cat: 'å®šé£Ÿèˆ‡æ²–ç¹©éºµ', area: 'æµ¦æ·»', desc: 'ã‚†ã—è±†è…è•éº¥éºµç™¼ç¥¥åº—ã€‚' },
                    { name: 'æ¿±å±‹è•éº¥éºµ', cat: 'å®šé£Ÿèˆ‡æ²–ç¹©éºµ', area: 'åŒ—è°·', desc: 'è»Ÿéª¨æ’éª¨å…¥å£å³åŒ–ï¼Œç¾åœ‹æ‘å¿…åƒã€‚' },
                    { name: 'è¬è‹…è•éº¥éºµ', cat: 'å®šé£Ÿèˆ‡æ²–ç¹©éºµ', area: 'åŒ—è°·', desc: 'åŠå±±è…°æµ·æ™¯ï¼Œæ‰‹å·¥è‡ªè£½éºµæ¢ã€‚' },
                    { name: 'æ¥šé‚Šè•éº¥éºµ', cat: 'å®šé£Ÿèˆ‡æ²–ç¹©éºµ', area: 'é‚£éœ¸', desc: 'å¤æ°‘å®¶å»ºç¯‰ï¼Œä»½é‡åè¶³ã€‚' },
                    { name: 'æ­¥æ²™ç¿ (Ayumi)', cat: 'å®šé£Ÿèˆ‡æ²–ç¹©éºµ', area: 'é‚£éœ¸', desc: 'ç‰§å¿—å¸‚å ´å…§ï¼Œæœ€é“åœ°çš„æ²–ç¹©é»å¿ƒæ²™ç¿ã€‚' },
                    { name: 'èŠ±ç¬ é£Ÿå ‚', cat: 'å®šé£Ÿèˆ‡æ²–ç¹©éºµ', area: 'é‚£éœ¸', desc: 'åœ‹éš›é€šå··å…§ï¼Œå¹³åƒ¹å¤§ä»½é‡å®¶å¸¸èœã€‚' },
                    { name: 'æ³¢å¸ƒé£Ÿå ‚', cat: 'å®šé£Ÿèˆ‡æ²–ç¹©éºµ', area: 'é‚£éœ¸', desc: 'é©šäººçš„ç‚’éºµå±±ï¼Œä»½é‡å¥‡å¤§ã€‚' },
                    { name: 'å‚‘å…‹ç‰›æ’ (Jack Steak)', cat: 'å®šé£Ÿèˆ‡æ²–ç¹©éºµ', area: 'é‚£éœ¸', desc: 'è€æ´¾æ´‹é£Ÿå®šé£Ÿï¼Œæ²–ç¹©äººå®µå¤œé¦–é¸ã€‚' },
                    { name: 'é£Ÿå ‚ ç‚­ç«ç‡’', cat: 'å®šé£Ÿèˆ‡æ²–ç¹©éºµ', area: 'é‚£éœ¸', desc: 'è·äººç¢³ç«æ–™ç†ã€‚' },
                    { name: 'ç‰§å¿—å¸‚å ´ äºŒæ¨“é£Ÿå ‚', cat: 'å®šé£Ÿèˆ‡æ²–ç¹©éºµ', area: 'é‚£éœ¸', desc: 'ä»£å®¢æ–™ç†ï¼Œé«”é©—æ²–ç¹©æµ·é®®æ°›åœã€‚' },

                    // ç‡’è‚‰æˆ–ç‰›æ’ (15)
                    { name: 'ç‰çƒä¹‹ç‰› æ©ç´åº—', cat: 'ç‡’è‚‰æˆ–ç‰›æ’', area: 'æ©ç´', desc: 'é ‚ç´šå’Œç‰›ï¼Œæ¥µè‡´çš„èåŒ–å£æ„Ÿã€‚' },
                    { name: 'ç‡’è‚‰æœ¬éƒ¨ç‰§å ´ é‚£éœ¸åº—', cat: 'ç‡’è‚‰æˆ–ç‰›æ’', area: 'é‚£éœ¸', desc: 'ç‰§å ´ç›´ç‡Ÿæœ¬éƒ¨ç‰›ï¼Œåˆé–“å¥—é¤CPå€¼é«˜ã€‚' },
                    { name: 'ç‡’è‚‰ç‹ (Kingu) æ–°éƒ½å¿ƒ', cat: 'ç‡’è‚‰æˆ–ç‰›æ’', area: 'é‚£éœ¸', desc: 'è¶…äººæ°£åƒåˆ°é£½ï¼Œå“é …æ¥µå¤šã€‚' },
                    { name: 'è‚‰å±‹ ã—ã—ã‚ƒ', cat: 'ç‡’è‚‰æˆ–ç‰›æ’', area: 'é‚£éœ¸', desc: 'åœ‹éš›é€šå··å…§ï¼Œç¾æŒ‘è‚‰å“ç¾çƒ¤ã€‚' },
                    { name: 'ç‡’è‚‰ 88', cat: 'ç‡’è‚‰æˆ–ç‰›æ’', area: 'é‚£éœ¸', desc: 'ç‰›æ’é¤¨è·¨ç•Œç‡’è‚‰ï¼Œè‚‰è³ªç©©å®šã€‚' },
                    { name: 'Roins é‚£éœ¸åº—', cat: 'ç‡’è‚‰æˆ–ç‰›æ’', area: 'é‚£éœ¸', desc: 'è¼•å¥¢è·¯ç·šï¼Œé©åˆæ…¶ç”Ÿç´„æœƒã€‚' },
                    { name: 'ä¸ƒè¼ªç‡’è‚‰å®‰å®‰', cat: 'ç‡’è‚‰æˆ–ç‰›æ’', area: 'é‚£éœ¸', desc: 'æ²–ç¹©å¹³åƒ¹é€£é–ç‡’è‚‰ä»£è¡¨ã€‚' },
                    { name: 'ç‡’è‚‰é‡‘åŸ åŒ—è°·åº—', cat: 'ç‡’è‚‰æˆ–ç‰›æ’', area: 'åŒ—è°·', desc: 'çŸ³å£ç‰›å°ˆé–€ï¼Œä¹Ÿæœ‰æ¼¢å ¡æ’ã€‚' },
                    { name: 'ç‡’è‚‰åŒ—è°·é¾', cat: 'ç‡’è‚‰æˆ–ç‰›æ’', area: 'åŒ—è°·', desc: 'å’Œç‰›åƒåˆ°é£½ï¼Œä½æ–¼ç¾åœ‹æ‘å•†åœˆã€‚' },
                    { name: 'ç‰çƒç‡’è‚‰ NAKAMA', cat: 'ç‡’è‚‰æˆ–ç‰›æ’', area: 'æ©ç´', desc: 'ç¾å¼æ°›åœï¼Œåšåˆ‡è‚‰å“è±ªé‚ã€‚' },
                    { name: 'ç‡’è‚‰æœ¬èˆ– å³¶ç‰›', cat: 'ç‡’è‚‰æˆ–ç‰›æ’', area: 'é‚£éœ¸', desc: 'é˜¿å¤è±¬èˆ‡ç¸£ç”¢å’Œç‰›ååº—ã€‚' },
                    { name: 'ç‡’è‚‰å·¥æˆ¿ åœ˜', cat: 'ç‡’è‚‰æˆ–ç‰›æ’', area: 'å°ç¥¿', desc: 'åœ¨åœ°äººæ„›åº—ï¼Œç„¡ç…™ç‡’è‚‰ã€‚' },
                    { name: 'æ•˜æ•˜è‹‘ PARCO CITY', cat: 'ç‡’è‚‰æˆ–ç‰›æ’', area: 'æµ¦æ·»', desc: 'æµ·æ™¯ç¬¬ä¸€æ’åƒé«˜æª”ç‡’è‚‰ã€‚' },
                    { name: 'Steak House 88', cat: 'ç‡’è‚‰æˆ–ç‰›æ’', area: 'é‚£éœ¸', desc: 'æ²–ç¹©æ­·å²æœ€æ‚ ä¹…ç‰›æ’é¤¨ã€‚' },
                    { name: 'Blue Ocean Steak', cat: 'ç‡’è‚‰æˆ–ç‰›æ’', area: 'åŒ—è°·', desc: 'é«˜ç´šç‰›æ’ï¼Œæ­£å°ç¾åœ‹æ‘å¤•é™½æµ·æ™¯ã€‚' },

                    // ç”œé»èˆ‡å’–å•¡ (15)
                    { name: 'å¹¸ç¦é¬†é¤… ç€¨é•·å³¶åº—', cat: 'ç”œé»èˆ‡å’–å•¡', area: 'è±è¦‹åŸ', desc: 'çœ‹é£›æ©Ÿèµ·é™é…æ¥µè‡´èˆ’èŠ™è•¾ã€‚' },
                    { name: 'oHacorte æ¸¯å·åº—', cat: 'ç”œé»èˆ‡å’–å•¡', area: 'æµ¦æ·»', desc: 'å¤–äººä½å®…å…§çš„æ°´æœå¡”å°ˆè³£åº—ã€‚' },
                    { name: 'Houki Boshi å¯éº—éœ²', cat: 'ç”œé»èˆ‡å’–å•¡', area: 'æµ¦æ·»', desc: 'æ²–ç¹©é»‘ç³–è£½ä½œçš„å°å·§å¯éº—éœ²ã€‚' },
                    { name: 'ZHYVAGO COFFEE', cat: 'ç”œé»èˆ‡å’–å•¡', area: 'åŒ—è°·', desc: 'å·¥æ¥­é¢¨æµ·æ™¯å’–å•¡ï¼Œç¾åœ‹æ‘åœ°æ¨™ã€‚' },
                    { name: 'è±¬é ­å’–å•¡ (Junglila)', cat: 'ç”œé»èˆ‡å’–å•¡', area: 'åŒ—è°·', desc: 'é¦éŸ†ã€æ²™ç˜åœ°æ¿ï¼Œè¶…ç‹‚ç¶²ç¾åº—ã€‚' },
                    { name: 'Blue Seal ç‰§å¿—åº—', cat: 'ç”œé»èˆ‡å’–å•¡', area: 'é‚£éœ¸', desc: 'æ²–ç¹©å¿…åƒå†°æ·‡æ·‹ï¼Œç´…èŠ‹å£å‘³æ¨è–¦ã€‚' },
                    { name: 'Ball Donut Park', cat: 'ç”œé»èˆ‡å’–å•¡', area: 'é‚£éœ¸', desc: 'è¶…å¯æ„›çƒå‹ç”œç”œåœˆã€‚' },
                    { name: 'C&C Breakfast', cat: 'ç”œé»èˆ‡å’–å•¡', area: 'é‚£éœ¸', desc: 'å¤å¨å¤·é¢¨æ ¼ï¼Œå·´è¥¿è“ç¢—å¾ˆæ­£å®—ã€‚' },
                    { name: 'ç”°èŠ‹èµ·å¸è›‹ç³• ç‰çƒ', cat: 'ç”œé»èˆ‡å’–å•¡', area: 'é‚£éœ¸', desc: 'é‡‘æ­¦ç”ºç”°èŠ‹è£½ä½œçš„ç‰¹è‰²è›‹ç³•ã€‚' },
                    { name: 'Maguro Base', cat: 'ç”œé»èˆ‡å’–å•¡', area: 'é‚£éœ¸', desc: 'ç‰¹è‰²å†°å“èˆ‡è¼•é£Ÿã€‚' },
                    { name: 'æ¸¯å·å†°æ·‡æ·‹ é›è›‹å±‹', cat: 'ç”œé»èˆ‡å’–å•¡', area: 'æµ¦æ·»', desc: 'æ¿ƒåšè›‹é¦™æ‰‹å·¥å†°ã€‚' },
                    { name: 'Coffee Potohoto', cat: 'ç”œé»èˆ‡å’–å•¡', area: 'é‚£éœ¸', desc: 'æ¦®ç”ºå¸‚å ´å…§ï¼Œå† è»è·äººå’–å•¡ã€‚' },
                    { name: 'ç”˜å‘³è™• æ¨‚åœ’', cat: 'ç”œé»èˆ‡å’–å•¡', area: 'é‚£éœ¸', desc: 'ç™¾è²¨å…¬å¸å…§çš„é«˜ç´šæ—¥å¼ç”œé»ã€‚' },
                    { name: 'VONGO & ANCHOR', cat: 'ç”œé»èˆ‡å’–å•¡', area: 'åŒ—è°·', desc: 'ç¾é£Ÿèˆ‡å’–å•¡çµåˆï¼Œæ°›åœæ»¿åˆ†ã€‚' },
                    { name: 'T&M Coffee', cat: 'ç”œé»èˆ‡å’–å•¡', area: 'é‚£éœ¸', desc: 'æ‰‹æ²–æ„›å¥½è€…å¿…è¨ªï¼Œè¿‘åœ‹éš›é€šã€‚' }
                ];

                const itineraries = ref({
                    '2026-04-14': [{ id: 1, category: 'èˆªç­', name: 'è™èˆª IT728', time: '15:45', note: 'æŠµé” 18:10\nè¨‚ä½: G23NJL / F5E9YC' }],
                    '2026-04-15': [], '2026-04-16': [], '2026-04-17': [],
                    '2026-04-18': [{ id: 2, category: 'èˆªç­', name: 'è™èˆª IT289', time: '14:00', note: 'æŠµé” 14:55\nè¨‚ä½: U1QDSB' }]
                });

                const filteredFood = computed(() => foodList.filter(f => f.cat === selectedCat.value));

                const initSortable = () => {
                    const el = document.getElementById('draggable-list');
                    if (!el || sortableInstance.value) return;
                    sortableInstance.value = Sortable.create(el, {
                        animation: 150, ghostClass: 'sortable-ghost', handle: '.card',
                        onEnd: (evt) => {
                            const list = [...itineraries.value[currentDate.value]];
                            const [moved] = list.splice(evt.oldIndex, 1);
                            list.splice(evt.newIndex, 0, moved);
                            itineraries.value[currentDate.value] = list;
                            localStorage.setItem('OKI_FINAL_DRAG', JSON.stringify(itineraries.value));
                        }
                    });
                };

                watch([currentDate, activeTab], async () => { if (activeTab.value === 'plan') { await nextTick(); initSortable(); } });

                const openAddPlan = () => { isEdit.value = false; formPlan.value = { id: Date.now(), category:'æ™¯é»', name:'', time:'10:00', note:'' }; showPlanModal.value = true; };
                const openEditPlan = (item, index) => { isEdit.value = true; currentIdx.value = index; formPlan.value = { ...item }; showPlanModal.value = true; };
                const savePlan = () => {
                    if(isEdit.value) itineraries.value[currentDate.value][currentIdx.value] = { ...formPlan.value };
                    else itineraries.value[currentDate.value].push({ ...formPlan.value });
                    localStorage.setItem('OKI_FINAL_DRAG', JSON.stringify(itineraries.value)); showPlanModal.value = false;
                };
                const confirmDeletePlan = () => { if(confirm("åˆªé™¤ï¼Ÿ")) { itineraries.value[currentDate.value].splice(currentIdx.value, 1); showPlanModal.value = false; } };
                const addFoodToPlan = (f) => { 
                    itineraries.value[currentDate.value].push({ id: Date.now(), category:'ç¾é£Ÿ', name: f.name, time:'12:00', note: f.desc }); 
                    activeTab.value = 'plan'; 
                };
                const goMapCoords = (lat, lng) => window.open(`http://googleusercontent.com/maps.google.com/?q=${lat},${lng}`);
                const getIcon = (cat) => ({ 'èˆªç­':'âœˆï¸','æ™¯é»':'ğŸ–ï¸','ä½å®¿':'ğŸ¨','ç¾é£Ÿ':'ğŸœ','è³¼ç‰©':'ğŸ›ï¸' }[cat] || 'ğŸ“');

                onMounted(() => {
                    const saved = localStorage.getItem('OKI_FINAL_DRAG');
                    if(saved) itineraries.value = JSON.parse(saved);
                    nextTick(() => initSortable());
                });

                return { activeTab, currentDate, selectedCat, categories, tripDays, itineraries, filteredFood, goMapCoords, addFoodToPlan, getIcon, openAddPlan, openEditPlan, savePlan, confirmDeletePlan, showPlanModal, formPlan, isEdit };
            }
        }).mount('#app');
    </script>
</body>
</html>
