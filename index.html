<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Okinawa Gourmet 2026</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vuedraggable@4.1.0/dist/vuedraggable.umd.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        [v-cloak] { display: none; }
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #f8fafc; padding-bottom: 110px; }
        
        /* é é¦–æ¨£å¼ */
        .header-illustration {
            background: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.2)), 
                        url('https://images.unsplash.com/photo-1559128010-7c1ad6e1b6a5?q=80&w=2073&auto=format&fit=crop');
            background-size: cover; background-position: center; height: 160px;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            color: white; text-shadow: 0 4px 12px rgba(0,0,0,0.6); border-bottom-left-radius: 30px; border-bottom-right-radius: 30px;
        }

        /* æ©«å¼æ»¾å‹•é¸å–® */
        .sticky-nav { position: sticky; top: 0; z-index: 30; background: rgba(248, 250, 252, 0.9); backdrop-blur: md; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        
        .cat-btn { flex-shrink: 0; padding: 8px 20px; border-radius: 20px; font-size: 13px; font-weight: 800; transition: all 0.3s; background: white; color: #64748b; border: 1px solid #e2e8f0; }
        .cat-btn-active { background: #0369a1; color: white; border-color: #0369a1; box-shadow: 0 4px 12px rgba(3,105,161,0.2); }

        .nav-active { background: #0369a1 !important; color: white !important; }
        .tab-btn-active { color: #0369a1; border-bottom: 3px solid #0369a1; }
        
        .fab { position: fixed; right: 20px; bottom: 120px; width: 56px; height: 56px; background: #0369a1; color: white; border-radius: 28px; display: flex; align-items: center; justify-content: center; font-size: 24px; box-shadow: 0 8px 16px rgba(3,105,161,0.3); z-index: 50; }
    </style>
</head>
<body>
    <div id="app" v-cloak>
        <header v-if="activeTab !== 'food'" class="header-illustration">
            <h1 class="text-2xl font-black tracking-widest">æ²–ç¹©å¤æ—¥ç´€è¡Œ</h1>
            <p class="text-[10px] font-bold opacity-80 uppercase">April 2026 Trip</p>
        </header>

        <main class="px-4 mt-4">
            <div v-if="activeTab === 'plan'">
                <div class="flex overflow-x-auto space-x-3 py-2 no-scrollbar mb-4">
                    <button v-for="day in tripDays" :key="day.date" @click="currentDate = day.date"
                        :class="['flex-shrink-0 w-14 h-16 rounded-2xl flex flex-col items-center justify-center bg-white text-slate-400 shadow-sm transition-all', { 'nav-active': currentDate === day.date }]">
                        <span class="text-[9px] font-black">{{ day.week }}</span>
                        <span class="text-lg font-black">{{ day.dayNum }}</span>
                    </button>
                </div>

                <draggable v-model="itineraries[currentDate]" item-key="id" handle=".handle" @end="saveData">
                    <template #item="{element, index}">
                        <div class="mb-3">
                            <div v-if="index > 0" class="flex items-center justify-center gap-2 my-2 text-slate-200">
                                <span class="border-t border-dashed w-full"></span>
                            </div>
                            <div class="bg-white rounded-2xl p-4 shadow-sm flex gap-4 items-center handle" @click="openEdit('plan', index)">
                                <div class="text-2xl">{{ getIcon(element.category) }}</div>
                                <div class="flex-1">
                                    <div class="flex justify-between items-start">
                                        <h3 class="font-bold text-slate-700 text-sm">{{ element.name }}</h3>
                                        <span class="text-[10px] font-black text-sky-600 bg-sky-50 px-2 py-0.5 rounded">{{ element.time }}</span>
                                    </div>
                                    <p class="text-[10px] text-slate-400 mt-1 italic">{{ element.note }}</p>
                                </div>
                            </div>
                        </div>
                    </template>
                </draggable>
                <button class="fab" @click="openAdd('plan')">+</button>
            </div>

            <div v-if="activeTab === 'food'">
                <div class="sticky-nav py-4 mb-4">
                    <h2 class="text-xl font-black text-slate-800 mb-3 px-1">ğŸ± æ²–ç¹©ç¾é£ŸæŒ‡å—</h2>
                    <div class="flex overflow-x-auto gap-2 no-scrollbar pb-2">
                        <button v-for="c in categories" @click="selectedCat = c" 
                            :class="['cat-btn', { 'cat-btn-active': selectedCat === c }]">{{ c }}</button>
                    </div>
                </div>

                <div class="grid grid-cols-1 gap-4 pb-12">
                    <div v-for="food in filteredFood" :key="food.name" class="bg-white rounded-3xl p-5 shadow-sm border border-slate-50">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="font-black text-slate-700 text-lg">{{ food.name }}</h3>
                            <span class="text-[10px] bg-slate-100 text-slate-500 px-2 py-1 rounded-lg font-bold">{{ food.area }}</span>
                        </div>
                        <p class="text-[11px] text-slate-400 leading-relaxed mb-4">{{ food.desc }}</p>
                        <div class="flex gap-2">
                            <button @click="openNav(food.name)" class="flex-1 text-[11px] font-bold py-3 bg-slate-50 rounded-xl text-slate-600">Google åœ°åœ–</button>
                            <button @click="addToPlan(food)" class="flex-1 text-[11px] font-bold py-3 bg-sky-600 rounded-xl text-white shadow-lg shadow-sky-100">åŠ å…¥è¡Œç¨‹</button>
                        </div>
                    </div>
                </div>
            </div>

            <div v-if="activeTab === 'info'" class="space-y-4">
                <div class="bg-white p-6 rounded-[32px] shadow-sm">
                    <h3 class="font-black text-slate-800 mb-4 text-center">ğŸ’´ æ—¥å¹£æ›ç®— (0.21)</h3>
                    <input type="number" v-model="fx.jpy" @input="fx.twd = (fx.jpy * 0.21).toFixed(0)" class="w-full bg-slate-50 p-4 rounded-2xl text-center text-2xl font-black text-sky-600 outline-none">
                    <p class="text-center mt-4 text-slate-400 font-bold">â‰ˆ TWD ${{ fx.twd }}</p>
                </div>
            </div>

            <div v-if="activeTab === 'cost'" class="pb-10">
                <div class="bg-slate-900 text-white p-8 rounded-[32px] mb-6 text-center">
                    <p class="text-[10px] font-bold opacity-50 uppercase">Total Spent</p>
                    <h2 class="text-4xl font-black">Â¥{{ totalCost }}</h2>
                </div>
                <div v-for="(item, index) in costs" :key="index" class="bg-white p-4 rounded-2xl mb-3 shadow-sm flex justify-between items-center">
                    <p class="font-bold text-slate-700">{{ item.name }}</p>
                    <p class="font-black text-slate-700">Â¥{{ item.amount }}</p>
                </div>
                <button class="fab" @click="openAdd('cost')">+</button>
            </div>
        </main>

        <nav class="fixed bottom-0 left-0 right-0 h-24 bg-white/95 backdrop-blur-xl border-t flex justify-around items-center z-40">
            <button v-for="t in ['plan','food','cost','info']" :key="t" @click="activeTab = t" :class="{'tab-btn-active': activeTab === t}" class="flex flex-col items-center p-2 text-slate-300">
                <span class="text-2xl">{{ {plan:'ğŸ“',food:'ğŸ•',cost:'ğŸ’°',info:'â„¹ï¸'}[t] }}</span>
                <span class="text-[9px] font-bold mt-1">{{ {plan:'è¡Œç¨‹',food:'ç¾é£Ÿ',cost:'å¸³ç›®',info:'åŒ¯ç‡'}[t] }}</span>
            </button>
        </nav>

        <div v-if="showModal" class="fixed inset-0 z-[100] bg-black/60 backdrop-blur-sm flex items-end">
            <div class="bg-white w-full rounded-t-[40px] p-8 max-h-[85vh] overflow-y-auto">
                <div class="flex justify-between items-center mb-6"><h3 class="text-xl font-black">ç·¨è¼¯é …ç›®</h3><button @click="showModal = false" class="text-slate-300">âœ•</button></div>
                <div v-if="modalType === 'plan'" class="space-y-4">
                    <input v-model="form.name" placeholder="åç¨±" class="w-full bg-slate-100 p-4 rounded-2xl font-bold">
                    <div class="flex gap-2">
                        <select v-model="form.category" class="flex-1 bg-slate-100 p-4 rounded-2xl"><option v-for="c in ['èˆªç­','æ™¯é»','ä½å®¿','ç¾é£Ÿ','å…¶ä»–']">{{c}}</option></select>
                        <input type="time" v-model="form.time" class="flex-1 bg-slate-100 p-4 rounded-2xl">
                    </div>
                    <textarea v-model="form.note" placeholder="å‚™è¨»..." class="w-full bg-slate-100 p-4 rounded-2xl h-24"></textarea>
                </div>
                <div v-if="modalType === 'cost'" class="space-y-4">
                    <input v-model="form.name" placeholder="é …ç›®" class="w-full bg-slate-100 p-4 rounded-2xl font-bold">
                    <input type="number" v-model="form.amount" placeholder="é‡‘é¡ (JPY)" class="w-full bg-slate-100 p-4 rounded-2xl font-black text-sky-600">
                </div>
                <div class="flex gap-3 mt-8">
                    <button v-if="isEdit" @click="deleteItem" class="flex-1 py-4 bg-red-50 text-red-500 rounded-2xl font-bold">åˆªé™¤</button>
                    <button @click="save" class="flex-[2] py-4 bg-sky-600 text-white rounded-2xl font-bold">å„²å­˜</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp, ref, computed, onMounted } = Vue;
        createApp({
            setup() {
                const activeTab = ref('plan');
                const currentDate = ref('2026-04-14');
                const selectedCat = ref('æ‹‰éºµ');
                const categories = ['æ‹‰éºµ', 'å®šé£Ÿ', 'ç‰›æ’æˆ–ç‡’è‚‰', 'å°ç”œé»å’–å•¡'];
                const showModal = ref(false);
                const modalType = ref('plan');
                const isEdit = ref(false);
                const currentIdx = ref(null);
                const fx = ref({ jpy: 1000, twd: 210 });

                const tripDays = [
                    { date: '2026-04-14', week: 'D1', dayNum: '14' },
                    { date: '2026-04-15', week: 'D2', dayNum: '15' },
                    { date: '2026-04-16', week: 'D3', dayNum: '16' },
                    { date: '2026-04-17', week: 'D4', dayNum: '17' },
                    { date: '2026-04-18', week: 'D5', dayNum: '18' }
                ];

                const itineraries = ref({'2026-04-14':[], '2026-04-15':[], '2026-04-16':[], '2026-04-17':[], '2026-04-18':[]});
                const costs = ref([]);
                
                // --- é¾å¤§çš„ç¾é£Ÿè³‡æ–™åº« (ç´„ 50 é–“) ---
                const foodList = ref([
                    // æ‹‰éºµé¡ (12é–“)
                    { name: 'æš–æš®æ‹‰éºµ é‚£éœ¸åº—', cat: 'æ‹‰éºµ', area: 'é‚£éœ¸', desc: 'ä¹å·ç¥¨é¸ç¬¬ä¸€ï¼Œæ¹¯é ­æ¿ƒåšè€Œä¸è†©ã€‚' },
                    { name: 'é€šå ‚æ‹‰éºµ å°ç¥¿æœ¬åº—', cat: 'æ‹‰éºµ', area: 'å°ç¥¿', desc: 'é¦–å‰µç”·äººéºµ(è±šéª¨)èˆ‡å¥³äººéºµ(é¹½å‘³)ã€‚' },
                    { name: 'è¿½é¢¨ä¸¸', cat: 'æ‹‰éºµ', area: 'åŒ—è°·', desc: 'åŒ—æµ·é“å‘³å™Œé¢¨æ ¼ï¼Œéºµæ¢å½ˆç‰™æœ‰å‹ã€‚' },
                    { name: 'ç‰å®¶', cat: 'æ‹‰éºµ', area: 'åœ‹éš›é€š', desc: 'ç¨ç‰¹çš„é»‘ç„¦æ²¹è±šéª¨ï¼Œå£æ„Ÿå±¤æ¬¡è±å¯Œã€‚' },
                    { name: 'æ‹‰éºµ é­åŠ›å±‹', cat: 'æ‹‰éºµ', area: 'åŒ—ä¸­åŸ', desc: 'äº¬éƒ½èƒŒè„‚é†¬æ²¹é¢¨æ ¼ï¼Œè”¥èŠ±ä»½é‡åè¶³ã€‚' },
                    { name: 'åº·é¾æ‹‰éºµ', cat: 'æ‹‰éºµ', area: 'åœ‹éš›é€š', desc: 'å¯è‡ªé¸é…æ–™ï¼Œé©åˆå®¢è£½åŒ–å£å‘³ã€‚' },
                    { name: 'ä¸€è˜­æ‹‰éºµ é‚£éœ¸åº—', cat: 'æ‹‰éºµ', area: 'åœ‹éš›é€š', desc: 'ç¶“å…¸ä¸æ•—é¸æ“‡ï¼Œç¨ç«‹éš”é–“ç”¨é¤ã€‚' },
                    { name: 'éººã‚„ å¶ ã‚‚ã¨ãªã‚Š', cat: 'æ‹‰éºµ', area: 'åè­·', desc: 'åœ¨åœ°äººæ¨è–¦çš„æ¿ƒéƒè±šéª¨æ‹‰éºµã€‚' },
                    { name: 'æ‹‰éºµ å¿—ä¹Ÿ', cat: 'æ‹‰éºµ', area: 'åŒ—è°·', desc: 'ç¾åœ‹æ‘é™„è¿‘ï¼Œæ·±å—å¤–åœ‹éŠå®¢å–œæ„›ã€‚' },
                    { name: 'æ³¢è”µæ‹‰éºµ', cat: 'æ‹‰éºµ', area: 'é‚£éœ¸', desc: 'æ¿ƒåšç³»ä»£è¡¨ï¼Œå‰ç‡’è‚¥ç¾å¤§ç‰‡ã€‚' },
                    { name: 'èµ¤é“æ‹‰éºµ', cat: 'æ‹‰éºµ', area: 'å®œé‡ç£', desc: 'è¦ªæ°‘åƒ¹æ ¼ï¼Œé“åœ°çš„æ²–ç¹©é¢¨å‘³æ‹‰éºµã€‚' },
                    { name: 'éººå‡¦ è›‡ã®ç›®', cat: 'æ‹‰éºµ', area: 'å®œé‡ç£', desc: 'ç²¾ç·»çš„ç…®å¹²(å°é­šä¹¾)æ¹¯é ­ã€‚' },

                    // å®šé£Ÿé¡ (13é–“)
                    { name: 'ç€å¡”ç‘ªè±¬è‚‰è›‹é£¯ç³°', cat: 'å®šé£Ÿ', area: 'ç‰§å¿—', desc: 'æ²–ç¹©éˆé­‚æ—©é¤ï¼Œç¾é»ç¾åšçš„ç¾å‘³ã€‚' },
                    { name: 'èŠ±ç¬ é£Ÿå ‚', cat: 'å®šé£Ÿ', area: 'åœ‹éš›é€š', desc: 'æ˜­å’Œé¢¨è€åº—ï¼Œè‹¦ç“œç‚’è±†è…å®šé£Ÿå¿…é»ã€‚' },
                    { name: 'ç™¾å¹´å¤å®¶ å¤§å®¶', cat: 'å®šé£Ÿ', area: 'åè­·', desc: 'é˜¿å¤è±¬æ¶®æ¶®é‹ï¼Œåœ¨ç™¾å¹´å¤å®…ç”¨é¤ã€‚' },
                    { name: 'æµ·é®®æ–™ç† æµ·é‚¦ä¸¸', cat: 'å®šé£Ÿ', area: 'æœ¬éƒ¨', desc: 'æ°´æ—é¤¨é™„è¿‘ï¼Œæµ·é®®è“‹é£¯æ–°é®®é£½æ»¿ã€‚' },
                    { name: 'ä¸€éŠ€é£Ÿå ‚', cat: 'å®šé£Ÿ', area: 'é‚£éœ¸', desc: 'åœ¨åœ°äººçš„åˆé¤è–åœ°ï¼Œé­šæ¹¯å®šé£Ÿæ¥µä½³ã€‚' },
                    { name: 'å¤å®‡åˆ©å³¶ è¦è¦é£¯', cat: 'å®šé£Ÿ', area: 'å¤å®‡åˆ©', desc: 'ç¶“å…¸è’œé¦™å¥¶æ²¹è¦ï¼Œé…ä¸Šç„¡æ•µæµ·æ™¯ã€‚' },
                    { name: 'é¦–é‡ŒåŸ ç‰çƒæ–™ç†', cat: 'å®šé£Ÿ', area: 'é¦–é‡Œ', desc: 'é«”é©—å‚³çµ±ç‰çƒå®®å»·å¾¡è†³ã€‚' },
                    { name: 'JEF Burger', cat: 'å®šé£Ÿ', area: 'é‚£éœ¸', desc: 'æ²–ç¹©é™å®šè‹¦ç“œåˆé¤è‚‰æ¼¢å ¡ã€‚' },
                    { name: 'æµœå±‹è•éº¥éºµ', cat: 'å®šé£Ÿ', area: 'åŒ—è°·', desc: 'è»Ÿå«©å…¥å£å³åŒ–çš„è»Ÿéª¨æ²–ç¹©éºµã€‚' },
                    { name: 'å²¸æœ¬é£Ÿå ‚', cat: 'å®šé£Ÿ', area: 'æœ¬éƒ¨', desc: 'ç™¾å¹´å‚³æ‰¿çš„æ‰‹å·¥ç°æ°´éºµã€‚' },
                    { name: 'ç´€ä¹ƒå·', cat: 'å®šé£Ÿ', area: 'æœ¬éƒ¨', desc: 'éš±è—ç‰ˆåœ¨åœ°é£Ÿå ‚ï¼Œç‚¸é˜¿å¤è±¬æ’æ¥µç¾å‘³ã€‚' },
                    { name: 'å³¶æ™‚é–“', cat: 'å®šé£Ÿ', area: 'æ©ç´', desc: 'æº«é¦¨çš„å³¶æ–™ç†ï¼Œé©åˆå®¶åº­ç”¨é¤ã€‚' },
                    { name: 'é“ä¹‹é©› ç³¸æ»¿', cat: 'å®šé£Ÿ', area: 'ç³¸æ»¿', desc: 'æ¼ç²ç›´éŠ·ä¸­å¿ƒï¼Œæœ€ä¾¿å®œçš„ç”Ÿé­šç‰‡ã€‚' },

                    // ç‰›æ’ç‡’è‚‰ (12é–“)
                    { name: 'å‚‘å…‹ç‰›æ’ Jack\'s', cat: 'ç‰›æ’æˆ–ç‡’è‚‰', area: 'é‚£éœ¸', desc: '1953å¹´å‰µç«‹ï¼Œæœ€ç¶“å…¸çš„å¾©å¤ç‰›æ’é¤¨ã€‚' },
                    { name: 'ç‰›æ’å±‹ 88', cat: 'ç‰›æ’æˆ–ç‡’è‚‰', area: 'åœ‹éš›é€š', desc: 'åˆ†åº—çœ¾å¤šï¼ŒçŸ³å£ç‰›èˆ‡æ¹¯å“åƒåˆ°é£½ã€‚' },
                    { name: 'ç‰çƒçš„ç‰›', cat: 'ç‰›æ’æˆ–ç‡’è‚‰', area: 'æ©ç´', desc: 'é ‚ç´šç‚­ç«ç‡’è‚‰ï¼Œè‚‰è³ªå…¥å£å³åŒ–ã€‚' },
                    { name: 'ç‡’è‚‰ ä¹ƒæˆ‘é‚£éœ¸', cat: 'ç‰›æ’æˆ–ç‡’è‚‰', area: 'åè­·', desc: 'é˜¿å¤è±¬èˆ‡å’Œç‰›å°ˆè³£åº—ï¼ŒCPå€¼æ¥µé«˜ã€‚' },
                    { name: 'Roins ç‡’è‚‰', cat: 'ç‰›æ’æˆ–ç‡’è‚‰', area: 'é‚£éœ¸', desc: 'ç²¾ç·»æ™‚é«¦çš„ç‡’è‚‰åº—ï¼Œé©åˆç´„æœƒã€‚' },
                    { name: 'è‚‰å±‹ æ–‡å·¦', cat: 'ç‰›æ’æˆ–ç‡’è‚‰', area: 'å®œé‡ç£', desc: 'å’Œç‰›å¤§å¸«ç¶“ç‡Ÿï¼Œæä¾›æœ€å„ªè³ªåˆ‡ç‰‡ã€‚' },
                    { name: 'Steak House 4ndy', cat: 'ç‰›æ’æˆ–ç‡’è‚‰', area: 'åŒ—è°·', desc: 'ç¾å¼ç²—æ› é¢¨æ ¼ç‰›æ’ï¼Œè‚‰æ„Ÿç´®å¯¦ã€‚' },
                    { name: 'ç‡’è‚‰ æœ¬éƒ¨ç‰›', cat: 'ç‰›æ’æˆ–ç‡’è‚‰', area: 'æœ¬éƒ¨', desc: 'å°ˆè³£æœ¬éƒ¨ç”ºè‡ªç”¢å“ç‰Œå’Œç‰›ã€‚' },
                    { name: 'Pound ç‰›æ’', cat: 'ç‰›æ’æˆ–ç‡’è‚‰', area: 'é‚£éœ¸', desc: 'ç§¤é‡è¨ˆåƒ¹ï¼Œæƒ³åƒå¤šå°‘é»å¤šå°‘ã€‚' },
                    { name: 'ç‡’è‚‰ äº”è‹‘', cat: 'ç‰›æ’æˆ–ç‡’è‚‰', area: 'åŒ—ä¸­åŸ', desc: 'åƒåˆ°é£½é¦–é¸ï¼Œæ·±å—å®¶åº­æ­¡è¿ã€‚' },
                    { name: 'æ¼¢å ¡æ’ ç‰›æ’ 29', cat: 'ç‰›æ’æˆ–ç‡’è‚‰', area: 'é‚£éœ¸', desc: 'ä¸»æ‰“æ‰‹æ‰“æ¼¢å ¡æ’èˆ‡ç‰¹è£½é†¬æ±ã€‚' },
                    { name: 'ç¢§ éµæ¿ç‡’', cat: 'ç‰›æ’æˆ–ç‡’è‚‰', area: 'é‚£éœ¸', desc: 'å¥³æ€§å¸«å‚…æ“åˆ€çš„é«˜ç´šéµæ¿æ–™ç†ã€‚' },

                    // ç”œé»å’–å•¡ (13é–“)
                    { name: 'å¹¸ç¦é¬†é¤… ç€¨é•·å³¶', cat: 'å°ç”œé»å’–å•¡', area: 'ç€¨é•·å³¶', desc: 'é›²æœµèˆ¬å£æ„Ÿï¼Œçœ‹è‘—æµ·æ™¯é£›æ©Ÿèµ·é™ã€‚' },
                    { name: 'Blue Seal å†°æ·‡æ·‹', cat: 'å°ç”œé»å’–å•¡', area: 'å…¨å¢ƒ', desc: 'æ²–ç¹©ä»£è¡¨è‰²ï¼Œå¤§æ¨ç´…èŠ‹èˆ‡æµ·é¹½å£å‘³ã€‚' },
                    { name: 'C&C BREAKFAST', cat: 'å°ç”œé»å’–å•¡', area: 'ç‰§å¿—', desc: 'è¶…ç¾å·´è¥¿è“æœç¢—èˆ‡æ­å¼æ—©åˆé¤ã€‚' },
                    { name: 'æ¸¯å·å¤–äººä½å®… å’–å•¡', cat: 'å°ç”œé»å’–å•¡', area: 'æµ¦æ·»', desc: 'è€å±‹æ”¹é€ çš„ç¾å¼å°æ‘è½ï¼Œæ¥µå¥½æ‹ã€‚' },
                    { name: 'oHacorte æ°´æœå¡”', cat: 'å°ç”œé»å’–å•¡', area: 'å…¨å¢ƒ', desc: 'æ²–ç¹©ç¬¬ä¸€çš„æ°´æœå¡”ååº—ã€‚' },
                    { name: 'ä¸‰çŸ¢æœ¬èˆ– èç¿', cat: 'å°ç”œé»å’–å•¡', area: 'æ©ç´', desc: 'åœ¨åœ°å‚³çµ±ç‚¸ç”œç”œåœˆï¼Œå¤–é…¥å…§è»Ÿã€‚' },
                    { name: 'Jungila å’–å•¡', cat: 'å°ç”œé»å’–å•¡', area: 'åŒ—è°·', desc: 'æ³¢è¥¿ç±³äºé¢¨ï¼Œå¯ä»¥èººè‘—çœ‹æµ·ã€‚' },
                    { name: 'é˜¿å˜‰é‚£ è€å±‹å’–å•¡', cat: 'å°ç”œé»å’–å•¡', area: 'é¦–é‡Œ', desc: 'éš±èº«é¦–é‡Œå··å¼„ï¼Œéœè¬çš„åˆèŒ¶æ™‚å…‰ã€‚' },
                    { name: 'æ­¥ ç”œç”œåœˆ', cat: 'å°ç”œé»å’–å•¡', area: 'ç‰§å¿—', desc: 'è™Ÿç¨±å¹»ä¹‹ç”œç”œåœˆï¼Œæ¯å¤©é™é‡é ç´„ã€‚' },
                    { name: 'ç”°ä¸­æœå¯¦åº—', cat: 'å°ç”œé»å’–å•¡', area: 'æ©ç´', desc: 'è¶…æµ®èª‡èŠ’æœå†°èˆ‡ç†±å¸¶æœé†¬ã€‚' },
                    { name: 'ZHYVAGO COFFEE', cat: 'å°ç”œé»å’–å•¡', area: 'åŒ—è°·', desc: 'ç¾åœ‹æ‘å·¥æ¥­é¢¨å’–å•¡é¤¨ï¼Œæ°£æ°›çµ•ä½³ã€‚' },
                    { name: 'å¾¡è“å­å¾¡æ®¿', cat: 'å°ç”œé»å’–å•¡', area: 'å…¨å¢ƒ', desc: 'ç´…èŠ‹å¡”å‰µå§‹åº—ï¼Œç¾å ´æœ‰DIYé«”é©—ã€‚' },
                    { name: 'Fontana Gelato', cat: 'å°ç”œé»å’–å•¡', area: 'åœ‹éš›é€š', desc: 'ç¹½ç´›è‰²å½©çš„ç¾©å¼æ‰‹å·¥å†°æ·‡æ·‹ã€‚' }
                ]);

                const filteredFood = computed(() => foodList.value.filter(f => f.cat === selectedCat.value));
                const totalCost = computed(() => costs.value.reduce((sum, i) => sum + Number(i.amount || 0), 0));

                const saveData = () => localStorage.setItem('OKI_GOURMET_DATA', JSON.stringify({itineraries: itineraries.value, costs: costs.value}));
                const loadData = () => {
                    const saved = localStorage.getItem('OKI_GOURMET_DATA');
                    if (saved) {
                        const data = JSON.parse(saved);
                        Object.assign(itineraries.value, data.itineraries);
                        costs.value = data.costs || [];
                    }
                };

                const openAdd = (type) => {
                    modalType.value = type; isEdit.value = false;
                    form.value = type === 'plan' ? { id: Date.now(), category: 'ç¾é£Ÿ', time: '12:00', name: '', note: '' } : { name: '', amount: '' };
                    showModal.value = true;
                };

                const openEdit = (type, index) => {
                    modalType.value = type; isEdit.value = true; currentIdx.value = index;
                    form.value = { ... (type === 'plan' ? itineraries.value[currentDate.value][index] : costs.value[index]) };
                    showModal.value = true;
                };

                const save = () => {
                    if (modalType.value === 'plan') {
                        if (isEdit.value) itineraries.value[currentDate.value][currentIdx.value] = { ...form.value };
                        else itineraries.value[currentDate.value].push({ ...form.value });
                    } else {
                        if (isEdit.value) costs.value[currentIdx.value] = { ...form.value };
                        else costs.value.push({ ...form.value });
                    }
                    saveData(); showModal.value = false;
                };

                const deleteItem = () => {
                    if (modalType.value === 'plan') itineraries.value[currentDate.value].splice(currentIdx.value, 1);
                    else costs.value.splice(currentIdx.value, 1);
                    saveData(); showModal.value = false;
                };

                const addToPlan = (food) => {
                    itineraries.value[currentDate.value].push({ id: Date.now(), category: 'ç¾é£Ÿ', name: food.name, time: '12:00', note: food.desc });
                    saveData(); activeTab.value = 'plan';
                };

                const openNav = (name) => window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(name + ' æ²–ç¹©')}`, '_blank');
                const getIcon = (cat) => ({ 'èˆªç­':'âœˆï¸','æ™¯é»':'ğŸ–ï¸','ä½å®¿':'ğŸ¨','ç¾é£Ÿ':'ğŸœ','å…¶ä»–':'ğŸ“' }[cat]);

                onMounted(loadData);
                return { activeTab, currentDate, selectedCat, categories, filteredFood, itineraries, costs, fx, showModal, modalType, isEdit, form, totalCost, openAdd, openEdit, save, deleteItem, getIcon, openNav, addToPlan, tripDays };
            }
        }).component('draggable', window.vuedraggable).mount('#app');
    </script>
</body>
</html>
